!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var h="function"==typeof require&&require;if(!s&&h)return h(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var u=r[a]={exports:{}};e[a][0].call(u.exports,function(t){var r=e[a][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t){function e(t,e,r,o){if(x+=o/1e3,h(t),n){t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),background.draw(),l.ortho(v,0,e,r,0,0,1);var a=c(Math.sin(x/2)/2+.5),s=u(.5,2,a);l.identity(_),l.scale(_,_,[s,s,0]),i.bind(),i.uniforms.projection=v,i.uniforms.view=_;var f=n.getBounds(),p=[1,1,1,1],d=20,g=10+f.height;i.uniforms.tint=p,n.draw(i,d,g,0,m.index),i.uniforms.tint=[140/255,218/255,115/255,1],n.draw(i,d,g,m.index,m.index+m[0].length),i.uniforms.tint=p,n.draw(i,d,g,m.index+m[0].length)}}function r(t){i=y(t),i.bind(),i.uniforms.tint=[1,1,1,1],background=s(t,{colors:[[80,80,80,255],[70,70,70,255]]}),f(d,function(e,r){var i=a(t,r);i.generateMipmap(),i.minFilter=t.LINEAR_MIPMAP_LINEAR,i.magFilter=t.LINEAR,n=o(t,{font:p,wrapMode:"pre",text:g,textures:[i]})})}t("canvas-testbed")(e,r,{context:"webgl"});var n,i,o=t("../"),a=t("gl-texture2d"),s=t("gl-checker-background"),h=t("gl-clear")({color:[.25,.25,.25,1]}),f=t("img"),u=t("lerp"),c=t("eases/quart-in"),l=t("gl-mat4"),p=t("./sdf/DejaVu-sdf.json"),d="sdf/DejaVu-sdf.png",g="#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec4 v_col;\nvarying vec2 v_tex0;\nuniform sampler2D texture0;\nuniform vec4 tint;\n\nconst float smoothing = 1.0/16.0;\nconst vec2 shadowOffset = vec2(-1.0/512.0);\nconst vec4 glowColor = vec4(vec3(0.1), 1.0);\nconst float glowMin = 0.2;\nconst float glowMax = 0.8;\n\n// drop shadow computed in fragment shader\nvoid main() {\n    vec4 texColor = texture2D(texture0, v_tex0);\n    float dst = texColor.a;\n    float alpha = smoothstep(0.5 - smoothing, 0.5 + smoothing, dst);\n\n    float glowDst = texture2D(texture0, v_tex0 + shadowOffset).a;\n    vec4 glow = glowColor * smoothstep(glowMin, glowMax, glowDst);\n\n    float mask = 1.0-alpha;\n\n    vec4 base = v_col * vec4(vec3(1.0), alpha) * tint;\n    gl_FragColor = mix(base, glow, mask);\n}",y=(t("glslify"),t("glslify/adapter.js")("\n#define GLSLIFY 1\n\nattribute vec4 position;\nattribute vec4 color;\nattribute vec2 texcoord0;\nuniform mat4 projection;\nuniform mat4 view;\nvarying vec4 v_col;\nvarying vec2 v_tex0;\nvoid main() {\n  gl_Position = projection * view * position;\n  v_col = color;\n  v_tex0 = texcoord0;\n  gl_PointSize = 1.0;\n}","\n#define GLSLIFY 1\n\n#ifdef GL_ES\n\nprecision mediump float;\n#endif\n\nvarying vec4 v_col;\nvarying vec2 v_tex0;\nuniform sampler2D texture0;\nuniform vec4 tint;\nconst float smoothing = 1.0 / 16.0;\nconst vec2 shadowOffset = vec2(-1.0 / 512.0);\nconst vec4 glowColor = vec4(vec3(0.1), 1.0);\nconst float glowMin = 0.2;\nconst float glowMax = 0.8;\nvoid main() {\n  vec4 texColor = texture2D(texture0, v_tex0);\n  float dst = texColor.a;\n  float alpha = smoothstep(0.5 - smoothing, 0.5 + smoothing, dst);\n  float glowDst = texture2D(texture0, v_tex0 + shadowOffset).a;\n  vec4 glow = glowColor * smoothstep(glowMin, glowMax, glowDst);\n  float mask = 1.0 - alpha;\n  vec4 base = v_col * vec4(vec3(1.0), alpha) * tint;\n  gl_FragColor = mix(base, glow, mask);\n}",[{name:"projection",type:"mat4"},{name:"view",type:"mat4"},{name:"texture0",type:"sampler2D"},{name:"tint",type:"vec4"}],[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"texcoord0",type:"vec2"}])),v=l.create(),_=l.create(),x=600,m=/\/\/(.*)$/gm.exec(g);m||(m={index:0,0:""})},{"../":3,"./sdf/DejaVu-sdf.json":2,"canvas-testbed":8,"eases/quart-in":17,"gl-checker-background":30,"gl-clear":33,"gl-mat4":43,"gl-texture2d":87,glslify:92,"glslify/adapter.js":91,img:98,lerp:100}],2:[function(t,e){e.exports={pages:["DejaVu.png"],chars:[{id:32,x:0,y:0,width:0,height:0,xoffset:0,yoffset:30,xadvance:19,page:0,chnl:0},{id:124,x:0,y:0,width:13,height:42,xoffset:4,yoffset:1,xadvance:19,page:0,chnl:0},{id:106,x:13,y:0,width:19,height:41,xoffset:-1,yoffset:1,xadvance:19,page:0,chnl:0},{id:36,x:32,y:0,width:25,height:40,xoffset:-1,yoffset:0,xadvance:19,page:0,chnl:0},{id:125,x:57,y:0,width:23,height:40,xoffset:-1,yoffset:1,xadvance:19,page:0,chnl:0},{id:123,x:80,y:0,width:23,height:40,xoffset:-1,yoffset:1,xadvance:19,page:0,chnl:0},{id:93,x:103,y:0,width:17,height:39,xoffset:1,yoffset:1,xadvance:19,page:0,chnl:0},{id:91,x:120,y:0,width:17,height:39,xoffset:3,yoffset:1,xadvance:19,page:0,chnl:0},{id:41,x:137,y:0,width:17,height:39,xoffset:2,yoffset:1,xadvance:19,page:0,chnl:0},{id:40,x:154,y:0,width:16,height:39,xoffset:3,yoffset:1,xadvance:19,page:0,chnl:0},{id:127,x:170,y:0,width:26,height:38,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:64,x:196,y:0,width:28,height:37,xoffset:-3,yoffset:3,xadvance:19,page:0,chnl:0},{id:81,x:224,y:0,width:26,height:37,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:92,x:250,y:0,width:24,height:36,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:47,x:274,y:0,width:24,height:36,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:121,x:298,y:0,width:25,height:35,xoffset:-2,yoffset:7,xadvance:19,page:0,chnl:0},{id:113,x:323,y:0,width:25,height:35,xoffset:-2,yoffset:7,xadvance:19,page:0,chnl:0},{id:112,x:348,y:0,width:25,height:35,xoffset:-1,yoffset:7,xadvance:19,page:0,chnl:0},{id:103,x:373,y:0,width:25,height:35,xoffset:-2,yoffset:7,xadvance:19,page:0,chnl:0},{id:108,x:398,y:0,width:25,height:34,xoffset:-3,yoffset:1,xadvance:19,page:0,chnl:0},{id:107,x:423,y:0,width:24,height:34,xoffset:0,yoffset:1,xadvance:19,page:0,chnl:0},{id:105,x:447,y:0,width:25,height:34,xoffset:-2,yoffset:1,xadvance:19,page:0,chnl:0},{id:104,x:472,y:0,width:23,height:34,xoffset:-1,yoffset:1,xadvance:19,page:0,chnl:0},{id:102,x:0,y:42,width:24,height:34,xoffset:-1,yoffset:1,xadvance:19,page:0,chnl:0},{id:100,x:24,y:42,width:25,height:34,xoffset:-2,yoffset:1,xadvance:19,page:0,chnl:0},{id:98,x:49,y:42,width:25,height:34,xoffset:-1,yoffset:1,xadvance:19,page:0,chnl:0},{id:38,x:74,y:42,width:28,height:33,xoffset:-3,yoffset:2,xadvance:19,page:0,chnl:0},{id:35,x:102,y:42,width:29,height:33,xoffset:-4,yoffset:2,xadvance:19,page:0,chnl:0},{id:63,x:131,y:42,width:22,height:33,xoffset:0,yoffset:2,xadvance:19,page:0,chnl:0},{id:33,x:153,y:42,width:13,height:33,xoffset:4,yoffset:2,xadvance:19,page:0,chnl:0},{id:48,x:166,y:42,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:57,x:191,y:42,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:56,x:216,y:42,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:55,x:241,y:42,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:54,x:266,y:42,width:24,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:53,x:290,y:42,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:52,x:315,y:42,width:26,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:51,x:341,y:42,width:24,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:50,x:365,y:42,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:49,x:390,y:42,width:23,height:33,xoffset:0,yoffset:2,xadvance:19,page:0,chnl:0},{id:116,x:413,y:42,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:90,x:438,y:42,width:26,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:89,x:464,y:42,width:26,height:33,xoffset:-3,yoffset:2,xadvance:19,page:0,chnl:0},{id:88,x:0,y:76,width:28,height:33,xoffset:-3,yoffset:2,xadvance:19,page:0,chnl:0},{id:87,x:28,y:76,width:28,height:33,xoffset:-4,yoffset:2,xadvance:19,page:0,chnl:0},{id:86,x:56,y:76,width:26,height:33,xoffset:-3,yoffset:2,xadvance:19,page:0,chnl:0},{id:85,x:82,y:76,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:84,x:107,y:76,width:27,height:33,xoffset:-3,yoffset:2,xadvance:19,page:0,chnl:0},{id:83,x:134,y:76,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:82,x:159,y:76,width:26,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:80,x:185,y:76,width:24,height:33,xoffset:-1,yoffset:2,xadvance:19,page:0,chnl:0},{id:79,x:209,y:76,width:26,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:78,x:235,y:76,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:77,x:260,y:76,width:27,height:33,xoffset:-3,yoffset:2,xadvance:19,page:0,chnl:0},{id:76,x:287,y:76,width:24,height:33,xoffset:-1,yoffset:2,xadvance:19,page:0,chnl:0},{id:75,x:311,y:76,width:26,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:74,x:337,y:76,width:23,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:73,x:360,y:76,width:23,height:33,xoffset:-1,yoffset:2,xadvance:19,page:0,chnl:0},{id:72,x:383,y:76,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:71,x:408,y:76,width:26,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:70,x:434,y:76,width:24,height:33,xoffset:-1,yoffset:2,xadvance:19,page:0,chnl:0},{id:69,x:458,y:76,width:24,height:33,xoffset:-1,yoffset:2,xadvance:19,page:0,chnl:0},{id:68,x:482,y:76,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:67,x:0,y:109,width:25,height:33,xoffset:-2,yoffset:2,xadvance:19,page:0,chnl:0},{id:66,x:25,y:109,width:25,height:33,xoffset:-1,yoffset:2,xadvance:19,page:0,chnl:0},{id:65,x:50,y:109,width:27,height:33,xoffset:-3,yoffset:2,xadvance:19,page:0,chnl:0},{id:37,x:77,y:109,width:27,height:32,xoffset:-3,yoffset:3,xadvance:19,page:0,chnl:0},{id:59,x:104,y:109,width:16,height:31,xoffset:2,yoffset:8,xadvance:19,page:0,chnl:0},{id:122,x:120,y:109,width:23,height:28,xoffset:-1,yoffset:7,xadvance:19,page:0,chnl:0},{id:120,x:143,y:109,width:26,height:28,xoffset:-3,yoffset:7,xadvance:19,page:0,chnl:0},{id:119,x:169,y:109,width:28,height:28,xoffset:-4,yoffset:7,xadvance:19,page:0,chnl:0},{id:118,x:197,y:109,width:25,height:28,xoffset:-2,yoffset:7,xadvance:19,page:0,chnl:0},{id:117,x:222,y:109,width:23,height:28,xoffset:-1,yoffset:7,xadvance:19,page:0,chnl:0},{id:115,x:245,y:109,width:23,height:28,xoffset:-1,yoffset:7,xadvance:19,page:0,chnl:0},{id:114,x:268,y:109,width:22,height:28,xoffset:2,yoffset:7,xadvance:19,page:0,chnl:0},{id:111,x:290,y:109,width:25,height:28,xoffset:-2,yoffset:7,xadvance:19,page:0,chnl:0},{id:110,x:315,y:109,width:23,height:28,xoffset:-1,yoffset:7,xadvance:19,page:0,chnl:0},{id:109,x:338,y:109,width:27,height:28,xoffset:-2,yoffset:7,xadvance:19,page:0,chnl:0},{id:99,x:365,y:109,width:24,height:28,xoffset:-1,yoffset:7,xadvance:19,page:0,chnl:0},{id:97,x:389,y:109,width:25,height:28,xoffset:-2,yoffset:7,xadvance:19,page:0,chnl:0},{id:43,x:414,y:109,width:27,height:27,xoffset:-3,yoffset:6,xadvance:19,page:0,chnl:0},{id:58,x:441,y:109,width:14,height:27,xoffset:4,yoffset:8,xadvance:19,page:0,chnl:0},{id:101,x:455,y:109,width:25,height:27,xoffset:-2,yoffset:8,xadvance:19,page:0,chnl:0},{id:62,x:480,y:109,width:27,height:25,xoffset:-3,yoffset:8,xadvance:19,page:0,chnl:0},{id:60,x:0,y:142,width:27,height:25,xoffset:-3,yoffset:8,xadvance:19,page:0,chnl:0},{id:42,x:27,y:142,width:23,height:24,xoffset:-1,yoffset:2,xadvance:19,page:0,chnl:0},{id:61,x:50,y:142,width:27,height:20,xoffset:-3,yoffset:10,xadvance:19,page:0,chnl:0},{id:94,x:77,y:142,width:26,height:19,xoffset:-3,yoffset:2,xadvance:19,page:0,chnl:0},{id:44,x:103,y:142,width:16,height:19,xoffset:2,yoffset:20,xadvance:19,page:0,chnl:0},{id:39,x:119,y:142,width:13,height:19,xoffset:4,yoffset:2,xadvance:19,page:0,chnl:0},{id:34,x:132,y:142,width:19,height:19,xoffset:1,yoffset:2,xadvance:19,page:0,chnl:0},{id:96,x:151,y:142,width:16,height:16,xoffset:0,yoffset:-1,xadvance:19,page:0,chnl:0},{id:126,x:167,y:142,width:27,height:15,xoffset:-3,yoffset:12,xadvance:19,page:0,chnl:0},{id:46,x:194,y:142,width:14,height:15,xoffset:4,yoffset:20,xadvance:19,page:0,chnl:0},{id:95,x:208,y:142,width:29,height:13,xoffset:-4,yoffset:30,xadvance:19,page:0,chnl:0},{id:45,x:237,y:142,width:18,height:13,xoffset:2,yoffset:15,xadvance:19,page:0,chnl:0}],kernings:[],info:{face:"DejaVu Sans Mono",size:32,bold:0,italic:0,charset:"",unicode:0,stretchH:100,smooth:1,aa:1,padding:[4,4,4,4],spacing:[-8,-8]},common:{lineHeight:38,base:30,scaleW:512,scaleH:512,pages:1,packed:0}}},{}],3:[function(t,e){function r(t,e,r){return l[0]=t.x,l[1]=t.y,p[0]=t.width,p[1]=t.height,s(l,p,e,r)}function n(t,e){if(!(this instanceof n))return new n(t,e);if(e=e||{},!e.font)throw new Error("must specify bmfont at creation time");if(!e.textures&&Array.isArray(e.font.images)&&(e.textures=e.font.images.map(function(e){return h(t,e)})),e.font=a(e.font),i.call(this,e),this.textures=e.textures||[],this.gl=t,!t)throw new Error("must specify gl context");"boolean"!=typeof e.dynamic&&(e.dynamic=!0);var r=e.batch;r||(this.defaultBatch=f(t,e)),this.batch=r||this.defaultBatch,"number"!=typeof e.wrapWidth&&this.layout()}var i=t("fontpath-simple-renderer"),o=t("inherits"),a=t("fontpath-bmfont"),s=t("texcoord"),h=(t("xtend"),t("gl-texture2d")),f=t("gl-sprite-batch"),u=[0,0],c=[0,0],l=[0,0],p=[0,0],d=[0,0,1,1];o(n,i),n.prototype.dispose=function(t){return this.defaultBatch&&this.defaultBatch.dispose(),t&&this.textures.forEach(function(t){"function"==typeof t.dispose&&t.dispose()}),this},n.prototype.uncache=function(){return this._cache=!1,this.batch.clear(),this},n.prototype.cache=function(t,e,r,n){return this._cache=!0,this.batch.ensureCapacity(this.text.length),this.batch.clear(),this._build(t,e,r,n),this},n.prototype.draw=function(t,e,r,n,i){var o=this.batch;return o.bind(t),this._cache||(o.clear(),this._build(e,r,n,i)),o.draw(),o.unbind(),this},n.prototype._build=function(t,e,r,n){var i=this.render(t,e,r,n),o=this.batch,a=0;if(!this._cache)for(o.texcoord=d,o.texture=null,a=0;a<i.underlines.length;a++){var s=i.underlines[a];o.position=s.position,o.shape=s.size,o.push()}for(a=0;a<i.glyphs.length;a++){var h=i.glyphs[a];this._drawGlyph(o,h)}},n.prototype._drawGlyph=function(t,e){var n=e.glyph,i=this.textures[n.page];u[0]=e.position[0]+n.hbx,u[1]=e.position[1]+n.hby-this.font.descender,c[0]=n.width*e.scale[0],c[1]=n.height*e.scale[1],t.texture=i,r(n,i&&i.shape,t.texcoord),t.position=u,t.shape=c,t.push()},e.exports=n},{"fontpath-bmfont":18,"fontpath-simple-renderer":19,"gl-sprite-batch":58,"gl-texture2d":87,inherits:99,texcoord:103,xtend:104}],4:[function(t,e,r){function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);var i,o=typeof t;if("number"===o)i=t>0?t>>>0:0;else if("string"===o)i=n.byteLength(t,e);else{if("object"!==o||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&B(t.data)&&(t=t.data),i=+t.length>0?Math.floor(+t.length):0}if(i>O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");var a;n.TYPED_ARRAY_SUPPORT?a=n._augment(new Uint8Array(i)):(a=this,a.length=i,a._isBuffer=!0);var s;if(n.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)a._set(t);else if(R(t))if(n.isBuffer(t))for(s=0;i>s;s++)a[s]=t.readUInt8(s);else for(s=0;i>s;s++)a[s]=(t[s]%256+256)%256;else if("string"===o)a.write(t,0,e);else if("number"===o&&!n.TYPED_ARRAY_SUPPORT&&!r)for(s=0;i>s;s++)a[s]=0;return i>0&&i<=n.poolSize&&(a.parent=F),a}function i(t,e,r){if(!(this instanceof i))return new i(t,e,r);var o=new n(t,e,r);return delete o.parent,o}function o(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;n>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[r+a]=s}return a}function a(t,e,r,n){var i=L(j(e,t.length-r),t,r,n);return i}function s(t,e,r,n){var i=L(S(e),t,r,n);return i}function h(t,e,r,n){return s(t,e,r,n)}function f(t,e,r,n){var i=L(U(e),t,r,n);return i}function u(t,e,r,n){var i=L(P(e,t.length-r),t,r,n,2);return i}function c(t,e,r){return N.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function l(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var o=e;r>o;o++)t[o]<=127?(n+=M(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return n+M(i)}function p(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(127&t[i]);return n}function d(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function g(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=e;r>o;o++)i+=I(t[o]);return i}function y(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function v(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function _(t,e,r,i,o,a){if(!n.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||a>e)throw new RangeError("value is out of bounds");if(r+i>t.length)throw new RangeError("index out of range")}function x(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);o>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function m(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);o>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function w(t,e,r,n,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function b(t,e,r,n,i){return i||w(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),D.write(t,e,r,n,23,4),r+4}function E(t,e,r,n,i){return i||w(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),D.write(t,e,r,n,52,8),r+8}function A(t){if(t=T(t).replace(k,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function T(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function R(t){return B(t)||n.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function I(t){return 16>t?"0"+t.toString(16):t.toString(16)}function j(t,e){var r,n=t.length,i=null;e=e||1/0;for(var o=[],a=0;n>a;a++){if(r=t.charCodeAt(a),r>55295&&57344>r){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(128>r){if((e-=1)<0)break;o.push(r)}else if(2048>r){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function S(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function P(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);a++)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function U(t){return N.toByteArray(A(t))}function L(t,e,r,n,i){i&&(n-=n%i);for(var o=0;n>o&&!(o+r>=e.length||o>=t.length);o++)e[o+r]=t[o];return o}function M(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var N=t("base64-js"),D=t("ieee754"),B=t("is-array");r.Buffer=n,r.SlowBuffer=i,r.INSPECT_MAX_BYTES=50,n.poolSize=8192;var O=1073741823,F={};n.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),n.isBuffer=function(t){return!(null==t||!t._isBuffer)},n.compare=function(t,e){if(!n.isBuffer(t)||!n.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var r=t.length,i=e.length,o=0,a=Math.min(r,i);a>o&&t[o]===e[o];o++);return o!==a&&(r=t[o],i=e[o]),i>r?-1:r>i?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,e){if(!B(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new n(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var i=new n(e),o=0;for(r=0;r<t.length;r++){var a=t[r];a.copy(i,o),o+=a.length}return i},n.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":r=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;case"hex":r=t.length>>>1;break;case"utf8":case"utf-8":r=j(t).length;break;case"base64":r=U(t).length;break;default:r=t.length}return r},n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(t,e,r){var n=!1;if(e>>>=0,r=void 0===r||1/0===r?this.length:r>>>0,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return g(this,e,r);case"utf8":case"utf-8":return l(this,e,r);case"ascii":return p(this,e,r);case"binary":return d(this,e,r);case"base64":return c(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===n.compare(this,t)},n.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return n.compare(this,t)},n.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},n.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},n.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var i=n;n=e,e=r,r=i}if(e=Number(e)||0,0>r||0>e||e>this.length)throw new RangeError("attempt to write outside buffer bounds");var c=this.length-e;r?(r=Number(r),r>c&&(r=c)):r=c,n=String(n||"utf8").toLowerCase();var l;switch(n){case"hex":l=o(this,t,e,r);break;case"utf8":case"utf-8":l=a(this,t,e,r);break;case"ascii":l=s(this,t,e,r);break;case"binary":l=h(this,t,e,r);break;case"base64":l=f(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":l=u(this,t,e,r);break;default:throw new TypeError("Unknown encoding: "+n)}return l},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t);var i;if(n.TYPED_ARRAY_SUPPORT)i=n._augment(this.subarray(t,e));else{var o=e-t;i=new n(o,void 0,!0);for(var a=0;o>a;a++)i[a]=this[a+t]}return i.length&&(i.parent=this.parent||this),i},n.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},n.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},n.prototype.readUInt8=function(t,e){return e||v(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,e){return e||v(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,e){return e||v(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,e){return e||v(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,e){return e||v(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},n.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||v(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},n.prototype.readInt8=function(t,e){return e||v(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},n.prototype.readInt16LE=function(t,e){e||v(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(t,e){e||v(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(t,e){return e||v(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,e){return e||v(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,e){return e||v(t,4,this.length),D.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,e){return e||v(t,4,this.length),D.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,e){return e||v(t,8,this.length),D.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,e){return e||v(t,8,this.length),D.read(this,t,!1,52,8)},n.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||_(this,t,e,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i>>>0&255;return e+r},n.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||_(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o>>>0&255;return e+r},n.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,1,255,0),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},n.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):x(this,t,e,!0),e+2},n.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):x(this,t,e,!1),e+2},n.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):m(this,t,e,!0),e+4},n.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):m(this,t,e,!1),e+4},n.prototype.writeIntLE=function(t,e,r,n){t=+t,e>>>=0,n||_(this,t,e,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var i=0,o=1,a=0>t?1:0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=(t/o>>0)-a&255;return e+r},n.prototype.writeIntBE=function(t,e,r,n){t=+t,e>>>=0,n||_(this,t,e,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var i=r-1,o=1,a=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-a&255;return e+r},n.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,1,127,-128),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},n.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):x(this,t,e,!0),e+2},n.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):x(this,t,e,!1),e+2},n.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):m(this,t,e,!0),e+4},n.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):m(this,t,e,!1),e+4},n.prototype.writeFloatLE=function(t,e,r){return b(this,t,e,!0,r)},n.prototype.writeFloatBE=function(t,e,r){return b(this,t,e,!1,r)},n.prototype.writeDoubleLE=function(t,e,r){return E(this,t,e,!0,r)},n.prototype.writeDoubleBE=function(t,e,r){return E(this,t,e,!1,r)},n.prototype.copy=function(t,e,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===t.length||0===o.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>r||r>=o.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var a=i-r;if(1e3>a||!n.TYPED_ARRAY_SUPPORT)for(var s=0;a>s;s++)t[s+e]=this[s+r];else t._set(this.subarray(r,r+a),e);return a},n.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=j(t.toString()),o=i.length;for(n=e;r>n;n++)this[n]=i[n%o]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var V=n.prototype;n._augment=function(t){return t.constructor=n,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=V.get,t.set=V.set,t.write=V.write,t.toString=V.toString,t.toLocaleString=V.toString,t.toJSON=V.toJSON,t.equals=V.equals,t.compare=V.compare,t.copy=V.copy,t.slice=V.slice,t.readUIntLE=V.readUIntLE,t.readUIntBE=V.readUIntBE,t.readUInt8=V.readUInt8,t.readUInt16LE=V.readUInt16LE,t.readUInt16BE=V.readUInt16BE,t.readUInt32LE=V.readUInt32LE,t.readUInt32BE=V.readUInt32BE,t.readIntLE=V.readIntLE,t.readIntBE=V.readIntBE,t.readInt8=V.readInt8,t.readInt16LE=V.readInt16LE,t.readInt16BE=V.readInt16BE,t.readInt32LE=V.readInt32LE,t.readInt32BE=V.readInt32BE,t.readFloatLE=V.readFloatLE,t.readFloatBE=V.readFloatBE,t.readDoubleLE=V.readDoubleLE,t.readDoubleBE=V.readDoubleBE,t.writeUInt8=V.writeUInt8,t.writeUIntLE=V.writeUIntLE,t.writeUIntBE=V.writeUIntBE,t.writeUInt16LE=V.writeUInt16LE,t.writeUInt16BE=V.writeUInt16BE,t.writeUInt32LE=V.writeUInt32LE,t.writeUInt32BE=V.writeUInt32BE,t.writeIntLE=V.writeIntLE,t.writeIntBE=V.writeIntBE,t.writeInt8=V.writeInt8,t.writeInt16LE=V.writeInt16LE,t.writeInt16BE=V.writeInt16BE,t.writeInt32LE=V.writeInt32LE,t.writeInt32BE=V.writeInt32BE,t.writeFloatLE=V.writeFloatLE,t.writeFloatBE=V.writeFloatBE,t.writeDoubleLE=V.writeDoubleLE,t.writeDoubleBE=V.writeDoubleBE,t.fill=V.fill,t.inspect=V.inspect,t.toArrayBuffer=V.toArrayBuffer,t};var k=/[^+\/0-9A-z\-]/g},{"base64-js":5,ieee754:6,"is-array":7}],5:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===c?62:e===s||e===l?63:h>e?-1:h+10>e?e-h+26+26:u+26>e?e-u:f+26>e?e-f+26:void 0}function r(t){function r(t){f[c++]=t}var n,i,a,s,h,f;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;h="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,f=new o(3*t.length/4-h),a=h>0?t.length-4:t.length;var c=0;for(n=0,i=0;a>n;n+=4,i+=3)s=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&s)>>16),r((65280&s)>>8),r(255&s);return 2===h?(s=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&s)):1===h&&(s=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(s>>8&255),r(255&s)),f}function i(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,a,s=t.length%3,h="";for(i=0,a=t.length-s;a>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],h+=r(o);switch(s){case 1:o=t[t.length-1],h+=e(o>>2),h+=e(o<<4&63),h+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],h+=e(o>>10),h+=e(o>>4&63),h+=e(o<<2&63),h+="="}return h}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),h="0".charCodeAt(0),f="a".charCodeAt(0),u="A".charCodeAt(0),c="-".charCodeAt(0),l="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],6:[function(t,e,r){r.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,h=(1<<s)-1,f=h>>1,u=-7,c=r?i-1:0,l=r?-1:1,p=t[e+c];
for(c+=l,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+c],c+=l,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+t[e+c],c+=l,u-=8);if(0===o)o=1-f;else{if(o===h)return a?0/0:1/0*(p?-1:1);a+=Math.pow(2,n),o-=f}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var a,s,h,f=8*o-i-1,u=(1<<f)-1,c=u>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),e+=a+c>=1?l/h:l*Math.pow(2,1-c),e*h>=2&&(a++,h/=2),a+c>=u?(s=0,a=u):a+c>=1?(s=(e*h-1)*Math.pow(2,i),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,f+=i;f>0;t[r+p]=255&a,p+=d,a/=256,f-=8);t[r+p-d]|=128*g}},{}],7:[function(t,e){var r=Array.isArray,n=Object.prototype.toString;e.exports=r||function(t){return!!t&&"[object Array]"==n.call(t)}},{}],8:[function(t,e){var r=t("domready");t("raf.js");var n=t("canvas-app");e.exports=function(t,e,i){r(function(){"object"==typeof t&&t?(i=t,t=null,e=null):"object"==typeof e&&e&&(i=e,e=null),i=i||{},"function"!=typeof i.onReady&&(i.onReady=e);var r=n(t,i);r.canvas.setAttribute("id","canvas"),document.body.appendChild(r.canvas),document.body.style.margin="0",document.body.style.overflow="hidden",r.start()})}},{"canvas-app":9,domready:15,"raf.js":16}],9:[function(t,e){function r(t){var e="undefined"!=typeof CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D;return t&&(e||i(t))}function n(t,e){if(!(this instanceof n))return new n(t,e);"object"==typeof t&&t&&(e=t,t=null),t="function"==typeof t?t:e.onRender,e=e||{},e.retina="boolean"==typeof e.retina?e.retina:!0;var h="number"==typeof e.width,f="number"==typeof e.height;(h||f)&&(e.ignoreResize=!0),e.width=h?e.width:window.innerWidth,e.height=f?e.height:window.innerHeight;var u,c,l=e.retina?window.devicePixelRatio||1:1,p=e.contextAttributes||{};if(this.isWebGL=!1,r(e.context)&&(c=e.context,u=c.canvas),u||(u=e.canvas||document.createElement("canvas")),u.width=e.width*l,u.height=e.height*l,!c)if("webgl"===e.context||"experimental-webgl"===e.context){if(c=o({canvas:u,attributes:p}),!c)throw"WebGL Context Not Supported -- try enabling it or using a different browser"}else c=u.getContext(e.context||"2d",p);this.isWebGL=i(c),e.retina&&(u.style.width=e.width+"px",u.style.height=e.height+"px"),this.running=!1,this.width=e.width,this.height=e.height,this.canvas=u,this.context=c,this.onResize=e.onResize,this._DPR=l,this._retina=e.retina,this._once=e.once,this._ignoreResize=e.ignoreResize,this._lastFrame=null,this._then=Date.now(),this.fps=60,this._frames=0,this._prevTime=this._then,this._ignoreResize||(e.resizeDebounce="number"==typeof e.resizeDebounce?e.resizeDebounce:50,s(window,"resize",a(function(){this.resize(window.innerWidth,window.innerHeight)}.bind(this),e.resizeDebounce,!1)),s(window,"orientationchange",function(){this.resize(window.innerWidth,window.innerHeight)}.bind(this))),this.onRender="function"==typeof t?t.bind(this):function(){},this.renderOnce=function(){var t=Date.now(),e=t-this._then;this._frames++,t>this._prevTime+1e3&&(this.fps=Math.round(1e3*this._frames/(t-this._prevTime)),this._prevTime=t,this._frames=0),this.isWebGL?this.context.viewport(0,0,this.width*this._DPR,this.height*this._DPR):(this.context.save(),this.context.scale(this._DPR,this._DPR)),this.onRender(this.context,this.width,this.height,e),this.isWebGL||this.context.restore(),this._then=t},this._renderHandler=function(){this.running&&(this._once||(this._lastFrame=requestAnimationFrame(this._renderHandler)),this.renderOnce())}.bind(this),"function"==typeof e.onReady&&e.onReady.call(this,c,this.width,this.height)}var i=t("is-webgl-context"),o=t("webgl-context"),a=t("debounce"),s=t("add-event-listener");Object.defineProperty(n.prototype,"retinaEnabled",{set:function(t){this._retina=t,this._DPR=this._retina?window.devicePixelRatio||1:1,this.resize(this.width,this.height)},get:function(){return this._retina}}),Object.defineProperty(n.prototype,"deviceWidth",{get:function(){return this.width*this._DPR}}),Object.defineProperty(n.prototype,"deviceHeight",{get:function(){return this.height*this._DPR}}),n.prototype.resetFPS=function(){this._frames=0,this._prevTime=Date.now(),this._then=this._prevTime,this.fps=60},n.prototype.start=function(){this.running||(this._lastFrame&&cancelAnimationFrame(this._lastFrame),this.resetFPS(),this.running=!0,this._lastFrame=requestAnimationFrame(this._renderHandler))},n.prototype.stop=function(){this._lastFrame&&(cancelAnimationFrame(this._lastFrame),this._lastFrame=null),this.running=!1},n.prototype.resize=function(t,e){var r=this.canvas;this.width=t,this.height=e,r.width=this.width*this._DPR,r.height=this.height*this._DPR,this._retina&&(r.style.width=this.width+"px",r.style.height=this.height+"px"),this._once&&requestAnimationFrame(this._renderHandler),"function"==typeof this.onResize&&this.onResize(this.width,this.height)},e.exports=n},{"add-event-listener":10,debounce:11,"is-webgl-context":13,"webgl-context":14}],10:[function(t,e){function r(t,e,r,n){return h=h||(document.addEventListener?{add:i,rm:o}:{add:a,rm:s}),h.add(t,e,r,n)}function n(t,e,r,n){return h=h||(document.addEventListener?{add:i,rm:o}:{add:a,rm:s}),h.rm(t,e,r,n)}function i(t,e,r,n){t.addEventListener(e,r,n)}function o(t,e,r,n){t.removeEventListener(e,r,n)}function a(t,e,r,n){if(n)throw new Error("cannot useCapture in oldIE");t.attachEvent("on"+e,r)}function s(t,e,r){t.detachEvent("on"+e,r)}r.removeEventListener=n,r.addEventListener=r,e.exports=r;var h=null},{}],11:[function(t,e){var r=t("date-now");e.exports=function(t,e,n){function i(){var u=r()-h;e>u&&u>0?o=setTimeout(i,e-u):(o=null,n||(f=t.apply(s,a),o||(s=a=null)))}var o,a,s,h,f;return null==e&&(e=100),function(){s=this,a=arguments,h=r();var u=n&&!o;return o||(o=setTimeout(i,e)),u&&(f=t.apply(s,a),s=a=null),f}}},{"date-now":12}],12:[function(t,e){function r(){return(new Date).getTime()}e.exports=Date.now||r},{}],13:[function(t,e){e.exports=function(t){if(!t)return!1;var e=t;return"undefined"!=typeof t.rawgl&&(e=t.rawgl),"undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext?!0:!1}},{}],14:[function(t,e){e.exports=function(t){t=t||{};var e=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(e.width=t.width),"number"==typeof t.height&&(e.height=t.height);var r=t.attributes||t.attribs||{};try{gl=e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}catch(n){gl=null}return gl}},{}],15:[function(t,e){!function(t,r){"undefined"!=typeof e?e.exports=r():"function"==typeof define&&"object"==typeof define.amd?define(r):this[t]=r()}("domready",function(){var t,e=[],r=document,n=r.documentElement.doScroll,i="DOMContentLoaded",o=(n?/^loaded|^c/:/^loaded|^i|^c/).test(r.readyState);return o||r.addEventListener(i,t=function(){for(r.removeEventListener(i,t),o=1;t=e.shift();)t()}),function(t){o?t():e.push(t)}})},{}],16:[function(){!function(t){for(var e=0,r=["webkit","moz"],n=t.requestAnimationFrame,i=t.cancelAnimationFrame,o=r.length;--o>=0&&!n;)n=t[r[o]+"RequestAnimationFrame"],i=t[r[o]+"CancelAnimationFrame"];n&&i||(n=function(t){var r=+new Date,n=Math.max(e+16,r);return setTimeout(function(){t(e=n)},n-r)},i=clearTimeout),t.requestAnimationFrame=n,t.cancelAnimationFrame=i}(window)},{}],17:[function(t,e){function r(t){return Math.pow(t,4)}e.exports=r},{}],18:[function(t,e){function r(t){return{page:t.page,hbx:t.xoffset,hby:t.yoffset,width:t.width,height:t.height,xoff:t.xadvance,x:t.x,y:t.y}}function n(t){var e={};return t.forEach(function(t){e[String.fromCharCode(t.id)]=r(t)}),e}e.exports=function(t){return{pages:t.pages,resolution:72,size:t.info.size,units_per_EM:1,bitmap:!0,family_name:t.info.face,height:t.common.lineHeight,descender:t.common.base,ascender:t.common.base,glyphs:n(t.chars),kerning:t.kernings.map(function(t){return[String.fromCharCode(t.first),String.fromCharCode(t.second),t.amount]})}}},{}],19:[function(t,e){function r(t){return this instanceof r?(o.call(this,t),void(this.data={glyphs:[],underlines:[]})):new r(t)}function n(t,e,r,n,i){this.glyph=e,this.index=t,this.charCode=r,this.position=i,this.scale=n}function i(t,e){this.position=t,this.size=e}var o=t("fontpath-renderer"),a=t("inherits");a(r,o),r.prototype.renderGlyph=function(t,e,r,i,o){this.data.glyphs.push(new n(t,e,this.text.charCodeAt(t),[r,this.font.bitmap?r:-r],[i,o]))},r.prototype.renderUnderline=function(t,e,r,n){this.data.underlines.push(new i([t,e],[r,n]))},r.prototype.render=function(t,e,r,n){return this.data.glyphs.length=0,this.data.underlines.length=0,o.prototype.render.call(this,t,e,r,n),this.data},e.exports=r},{"fontpath-renderer":20,inherits:99}],20:[function(t,e){function r(t){return this instanceof r?(t=t||{},this.iterator=new n(t.font,t.fontSize),this.wordwrap=new i,this.align="left",this.underline=!1,this.underlineThickness=void 0,this.underlinePosition=void 0,this._text="","string"==typeof t.align&&(this.align=t.align),"boolean"==typeof t.underline&&(this.underline=t.underline),"number"==typeof t.underlineThickness&&(this.underlineThickness=t.underlineThickness),"number"==typeof t.underlinePosition&&(this.underlinePosition=t.underlinePosition),"string"==typeof t.text&&(this.text=t.text),"number"==typeof t.lineHeight&&(this.lineHeight=t.lineHeight),"number"==typeof t.letterSpacing&&(this.letterSpacing=t.letterSpacing),"string"==typeof t.wrapMode&&(this.wordwrap.mode=t.wrapMode),void("number"==typeof t.wrapWidth&&this.layout(t.wrapWidth))):new r(t)}var n=t("fontpath-glyph-iterator"),i=t("fontpath-wordwrap"),o={x:0,y:0,width:0,height:0,glyphs:0},a=0,s=1,h=2,f=["left","center","right"];Object.defineProperties(r.prototype,{font:{get:function(){return this.iterator.font},set:function(t){var e=this.iterator.font;this.iterator.font=t,e!==this.iterator.font&&this.clearLayout()}},fontSize:{get:function(){return this.iterator.fontSize},set:function(t){var e=this.iterator.fontSize;this.iterator.fontSize=t,e!==this.iterator.fontSize&&this.clearLayout()}},lineHeight:{get:function(){return this.iterator.lineHeight},set:function(t){this.iterator.lineHeight=t}},letterSpacing:{get:function(){return this.iterator.letterSpacing},set:function(t){this.iterator.letterSpacing=t}},text:{get:function(){return this._text},set:function(t){t=t||"";var e=this._text;this._text=t,this.wordwrap.text=this.text,this._text!==e&&this.clearLayout()}}}),r.prototype.clearLayout=function(){this.wordwrap.text=this.text,this.wordwrap.empty(),this.iterator.font&&this.wordwrap.clearLayout(this.iterator)},r.prototype.layout=function(t){this.wordwrap.text=this.text,this.wordwrap.empty(),this.wordwrap.layout(this.iterator,t)},r.prototype.renderGlyph=function(){},r.prototype.renderUnderline=function(){},r.prototype.getBounds=function(t,e){e||(e={x:0,y:0,width:0,height:0});var r=this.wordwrap,n=this.iterator,i=0;if(r.lines.length>0){var a=r.lines[0];n.getBounds(this.text,a.start,a.end,void 0,o),i=o.height}if(e.width=r.getMaxLineWidth(),e.height=Math.max(0,r.lines.length-1)*n.getLineGap()+i,e.x=0,e.y=-e.height,t){var s=this.computeUnderlineHeight(),h=this.computeUnderlinePosition(),f=h+s/2;e.height+=f}return e},r.prototype.computeUnderlineHeight=function(){var t=this.font,e=this.iterator.fontScale;return 0===this.underlineThickness||this.underlineThickness?this.underlineThickness:t.underline_thickness?t.underline_thickness*e:t.bitmap?t.size/8:t.units_per_EM/8*e},r.prototype.computeUnderlinePosition=function(){var t=this.font,e=this.iterator.fontScale;return 0===this.underlinePosition||this.underlinePosition?this.underlinePosition:t.underline_position?-t.underline_position*e:t.bitmap?t.size/4:t.units_per_EM/4*e},r.prototype.getDescender=function(){return Math.abs(this.iterator.fontScale*this.iterator.font.descender)},r.prototype.getAscender=function(){return Math.abs(this.iterator.fontScale*this.iterator.font.ascender)},r.prototype.onBegin=function(){},r.prototype.onEnd=function(){},r.prototype.onBeginLine=function(){},r.prototype.onEndLine=function(){},r.prototype.render=function(t,e,r,n){t=t||0,e=e||0;var i=this.text,o=this.wordwrap;if(i&&0!==o.lines.length){r=r||0,n="number"==typeof n?n:i.length;var u=this.iterator,c=u.fontScale,l=(u.font,this.underline),p=o.getMaxLineWidth();e-=Math.max(0,o.lines.length-1)*u.getLineGap();var d=f.indexOf(this.align||"");-1===d&&(d=a);var g=0,y=0,v=0,_=0,x=!1,m=this.computeUnderlinePosition(),w=this.computeUnderlineHeight();this.onBegin(),u.begin(t,e);for(var b=0;b<o.lines.length;b++){var E=o.lines[b];x=!1;{var A=0;u.pen.x,u.pen.y}this.onBeginLine(b);for(var T=E.start;T<E.end;T++){var R=(i.charAt(T),u.step(i,T));if(R){if(T>=r&&n>T){var I=u.pen.x,j=u.pen.y;d===s?I+=(p-E.width)/2:d===h&&(I+=p-E.width),x?_=I-y:(g=I,y=I,v=j+m,_=0,x=!0),this.renderGlyph(T,R,c,I,j)}var S=u.advance(R);T>=r&&n>T&&(A=S)}}this.onEndLine(b),l&&(_+=A,this.renderUnderline(g,v-w/2,_,w)),b<o.lines.length-1&&u.advanceLine()}u.end(),this.onEnd()}},e.exports=r},{"fontpath-glyph-iterator":21,"fontpath-wordwrap":23}],21:[function(t,e){function r(t,e){this._fontSize=void 0,this._fontScale=void 0,this._font=void 0,this.fontScale=1,this.kerning=!0,this.letterSpacing=0,this.lineHeight=void 0,this.fontSize="number"==typeof e?e:t?t.size:void 0,this.font=t,this.tabWidth=i,this._tabGlyph=null,this.origin={x:0,y:0},this.pen={x:0,y:0}}var n=t("fontpath-util"),i=4;Object.defineProperty(r.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t,t&&(this.fontScale=n.getPxScale(t,this.fontSize),this.tabWidth=this._tabWidth)}}),Object.defineProperty(r.prototype,"tabWidth",{get:function(){return this._tabWidth},set:function(t){this._tabWidth=0===t||t?t:i,this._tabGlyph={};var e=this.font?this.font.glyphs[" "]:null;if(e){this._tabGlyph={};for(var r in e)this._tabGlyph[r]=e[r];this._tabGlyph.xoff&&(this._tabGlyph.xoff*=this._tabWidth)}}}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return"number"!=typeof this._fontSize?this.font.bitmap?this.font.size:n.pointToPixel(this.font.size):this._fontSize},set:function(t){this._fontSize=t,this._font&&(this.fontScale=n.getPxScale(this._font,this._fontSize))}}),r.prototype.getKerning=function(t,e){var r=this.font;if(!r||!r.kerning)return 0;for(var n=(this.kerningTable,0);n<r.kerning.length;n++){var i=r.kerning[n];if(i[0]===t&&i[1]===e)return i[2]}return 0},r.prototype.begin=function(t,e){this.origin.x=t||0,this.origin.y=e||0,this.pen.x=this.origin.x,this.pen.y=this.origin.y},r.prototype.end=function(){},r.prototype.getLineGap=function(){var t=this.font,e=this.fontScale,r=(t.height-t.ascender+Math.abs(t.descender))*e,n=this.lineHeight;return n=0===n||n?n+r:this.fontSize},r.prototype.translate=function(t,e){this.origin.x+=t||0,this.origin.y+=e||0,this.pen.x+=t||0,this.pen.y+=e||0},r.prototype.step=function(t,e){var r=this.fontScale,n=this._font,i=t.charAt(e);if("	"===i&&this._tabGlyph)return this._tabGlyph;if(i in n.glyphs){var o=n.glyphs[i];if(e>0&&this.kerning){var a=this.getKerning(t.charAt(e-1),i);this.pen.x+=a*r}return o}},r.prototype.advanceLine=function(){this.pen.y+=this.getLineGap(),this.pen.x=this.origin.x},r.prototype.advance=function(t){var e=t.xoff*this.fontScale;return this.pen.x+=e+this.letterSpacing,e},r.prototype.getBounds=function(t,e,r,n,i){i||(i={x:0,y:0,width:0,height:0,glyphs:0});var o=0===n||n;e=e||0,r=0===r||r?r:t.length;var a=0;i.x=0,i.y=0,i.glyphs=0;{var s=this.pen.x,h=this.pen.y,f=this.origin.x,u=this.origin.y;this.font}this.begin();for(var c=e;r>c;c++){var l=(t.charAt(c),this.step(t,c));if(l){var p=l.height*this.fontScale;i.y=Math.max(i.y,this.fontScale*(l.height-l.hby)),a=Math.max(a,p);var d=this.advance(l),g=this.pen.x-this.origin.x;if(o&&g-n>.001){this.pen.x-=d;break}i.glyphs++}}return this.end(),i.width=this.pen.x-this.origin.x,i.height=a,this.pen.x=s,this.pen.y=h,this.origin.x=f,this.origin.y=u,i},e.exports=r},{"fontpath-util":22}],22:[function(t,e){e.exports.pointToPixel=function(t,e){return e=e||0===e?e:96,t=t*e/72,Math.round(t)},e.exports.getPxScale=function(t,e){if(t.bitmap)return 1;e="number"==typeof e?e:this.pointToPixel(t.size);var r=t.units_per_EM/64;return r=r/t.size*e,1*t.resolution/72*r/t.units_per_EM},e.exports.getPtScale=function(t,e){return e="number"==typeof e?e:t.size,e=this.pointToPixel(e),this.getPxScale(t,e)}},{}],23:[function(t,e){function r(t){return" "===t||"\n"===t||"\r"===t||"	"===t}function n(t,e,r,n){var i=t.indexOf(e,r);return-1===i||i>n?n:i}function i(t){this.text=t||"",this.lines=[],this.newline="\n",this.clip=!1,this.mode=i.Mode.NORMAL}var o={x:0,y:0,width:0,height:0,glyphs:0};i.Mode={PRE:"pre",NORMAL:"normal",NOWRAP:"nowrap"},i.prototype.clearLayout=function(t){if(this.lines.length=0,this.text.length>0){t.getBounds(this.text,0,this.text.length,void 0,o);var e=new i.Line(0,this.text.length,o.width);this.lines.push(e)}},i.prototype.empty=function(){this.lines.length=0},i.prototype.layout=function(t,e,a,s){var h=this.text,f=this.lines;if(a=Math.max(0,a||0),s=0===s||s?s:h.length,t.begin(),e=0===e||e?e:Number.MAX_VALUE,this.mode===i.Mode.PRE)for(var u=a,c=a;s>c;c++){var l=h.charAt(c);if(l===this.newline||c===s-1){var p=this.clip?e:void 0;t.getBounds(h,u,c+1,p,o),f.push(new i.Line(u,u+o.glyphs,o.width)),u=c+1}}else{var d=e;for(this.mode===i.Mode.NOWRAP&&(d=Number.MAX_VALUE);s>a;){for(var g=n(h,this.newline,a,s);g>a&&r(h.charAt(a));)a++;t.getBounds(h,a,g,d,o);var y=a+o.glyphs,v=y+this.newline.length;if(g>y){for(;y>a&&!r(h.charAt(y));)y--;if(y===a)v>a+this.newline.length&&v--,y=v;else for(v=y;y>a&&r(h.charAt(y-this.newline.length));)y--}if(y>a){var p=this.clip?e:void 0;t.getBounds(h,a,y,p,o);var _=o.width,x=this.clip?a+o.glyphs:y;f.push(new i.Line(a,x,_))}a=v}}t.end()},i.prototype.getMaxLineWidth=function(){for(var t=0,e=0;e<this.lines.length;e++){var r=this.lines[e];t=Math.max(r.width,t)}return t},i.Line=function(t,e,r){this.start=t,this.end=e,this.width=r},e.exports=i},{}],24:[function(t,e){function r(t,e,r){r=r||0;var n="";n+="attribute vec4 "+a+";\n"+(t?"attribute vec3 "+s+";\n":"")+(e?"attribute vec4 "+h+";\n":"");var i;for(i=0;r>i;i++)n+="attribute vec2 "+f+i+";\n";for(n+="uniform mat4 projection;\n",n+="uniform mat4 view;\n",n+="uniform mat4 model;\n",n+=e?"varying vec4 v_col;\n":"",i=0;r>i;i++)n+="varying vec2 v_tex"+i+";\n";for(n+="\nvoid main() {\n   gl_Position = projection * view * model * "+a+";\n"+(e?"   v_col = "+h+";\n":""),i=0;r>i;i++)n+="   v_tex"+i+" = "+f+i+";\n";return n+="   gl_PointSize = 1.0;\n",n+="}\n"}function n(t,e){e=e||0;var r="#ifdef GL_ES\nprecision mediump float;\n#endif\n\n";t&&(r+="varying vec4 v_col;\n");var n;for(n=0;e>n;n++)r+="varying vec2 v_tex"+n+";\n",r+="uniform sampler2D texture"+n+";\n";for(r+="uniform vec4 tint;\n",r+="\nvoid main() {\n   gl_FragColor = ",t&&(r+="v_col"),t&&e>0?r+=" * ":t||e||(r+="vec4(1.0)"),n=0;e>n;n++)r+=n==e-1?" texture2D(texture"+n+",  v_tex"+n+")":" texture2D(texture"+n+",  v_tex"+n+") *";return r+=" * tint",r+=";\n}"}var i=t("gl-mat4/identity"),o=t("gl-shader-core"),a="position",s="normal",h="color",f="texcoord";e.exports=function(t,r){r=r||{},r.texcoord="number"==typeof r.texcoord?r.texcoord:r.texcoord||0;var n=e.exports.generate(r),a=n.vertex,s=n.fragment,h=n.uniforms,f=n.attributes,u=o(t,a,s,h,f);u.bind();for(var c=0;c<r.texcoord;c++)u.uniforms["texture"+c]=c;var l=i(new Float32Array(16));return u.uniforms.projection=l,u.uniforms.model=l,u.uniforms.view=l,u.uniforms.tint=r.tint||[1,1,1,1],u},e.exports.generate=function(t){t=t||{},t.texcoord="number"==typeof t.texcoord?t.texcoord:t.texcoord||0;var e="string"==typeof t.vertex?t.vertex:r(t.normal,t.color,t.texcoord),i="string"==typeof t.fragment?t.fragment:n(t.color,t.texcoord),o=[{type:"mat4",name:"projection"},{type:"mat4",name:"view"},{type:"mat4",name:"model"},{type:"vec4",name:"tint"}],u=[{type:"vec4",name:a,location:0}];t.normal&&u.push({type:"vec3",name:s,location:1}),t.color&&u.push({type:"vec4",name:h,location:2});for(var c=3,l=0;l<t.texcoord;l++)o.push({type:"sampler2D",name:"texture"+l}),u.push({type:"vec2",name:f+l,location:c++});return{vertex:e,fragment:i,uniforms:o,attributes:u}}},{"gl-mat4/identity":42,"gl-shader-core":29}],25:[function(t,e){"use strict";function r(t,e,r,n,i,o,a){this._gl=t,this._program=e,this._location=r,this._dimension=n,this._name=i,this._constFunc=o,this._relink=a}function n(t,e,n,i,o,a,s){for(var h=["gl","v"],f=[],u=0;i>u;++u)h.push("x"+u),f.push("x"+u);h.push(["if(x0.length===void 0){return gl.vertexAttrib",i,"f(v,",f.join(),")}else{return gl.vertexAttrib",i,"fv(v,x0)}"].join(""));var c=Function.apply(void 0,h),l=new r(t,e,n,i,a,c,s);Object.defineProperty(o,a,{set:function(e){return t.disableVertexAttribArray(l._location),c(t,l._location,e),e},get:function(){return l},enumerable:!0})}function i(t,e,r,i){for(var o={},a=0,s=r.length;s>a;++a){var h=r[a],f=h.name,u=h.type,c=t.getAttribLocation(e,f);switch(u){case"bool":case"int":case"float":n(t,e,c,1,o,f,i);break;default:if(!(u.indexOf("vec")>=0))throw new Error("gl-shader: Unknown data type for attribute "+f+": "+u);var l=u.charCodeAt(u.length-1)-48;if(2>l||l>4)throw new Error("gl-shader: Invalid data type for attribute "+f+": "+u);n(t,e,c,l,o,f,i)}}return o}e.exports=i;var o=r.prototype;o.pointer=function(t,e,r,n){var i=this._gl;i.vertexAttribPointer(this._location,this._dimension,t||i.FLOAT,!!e,r||0,n||0),this._gl.enableVertexAttribArray(this._location)},Object.defineProperty(o,"location",{get:function(){return this._location},set:function(t){t!==this._location&&(this._location=t,this._gl.bindAttribLocation(this._program,t,this._name),this._gl.linkProgram(this._program),this._relink())}})},{}],26:[function(t,e){"use strict";function r(t){var e=new Function("y","return function(){return y}");return e(t)}function n(t,e,n,a){function s(r){var n=new Function("gl","prog","locations","return function(){return gl.getUniform(prog,locations["+r+"])}");return n(t,e,a)}function h(t,e,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+e+"],obj"+t+")";case"float":return"gl.uniform1f(locations["+e+"],obj"+t+")";default:var n=r.indexOf("vec");if(!(n>=0&&1>=n&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var i=r.charCodeAt(r.length-1)-48;if(2>i||i>4)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+i+"fv(locations["+e+"],false,obj"+t+")"}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+r)}var i=r.charCodeAt(r.length-1)-48;if(2>i||i>4)throw new Error("gl-shader: Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+e+"],obj"+t+")";case"v":return"gl.uniform"+i+"fv(locations["+e+"],obj"+t+")";default:throw new Error("gl-shader: Unrecognized data type for vector "+name+": "+r)}}}function f(t,e){if("object"!=typeof e)return[[t,e]];var r=[];for(var n in e){var i=e[n],o=t;o+=parseInt(n)+""===n?"["+n+"]":"."+n,"object"==typeof i?r.push.apply(r,f(o,i)):r.push([o,i])}return r}function u(r){for(var i=["return function updateProperty(obj){"],o=f("",r),s=0;s<o.length;++s){var u=o[s],c=u[0],l=u[1];a[l]&&i.push(h(c,l,n[l].type))}i.push("return obj}");var p=new Function("gl","prog","locations",i.join("\n"));return p(t,e,a)}function c(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var e=t.indexOf("vec");if(e>=0&&1>=e&&t.length===4+e){var r=t.charCodeAt(t.length-1)-48;if(2>r||r>4)throw new Error("gl-shader: Invalid data type");return"b"===t.charAt(0)?i(r,!1):i(r)}if(0===t.indexOf("mat")&&4===t.length){var r=t.charCodeAt(t.length-1)-48;if(2>r||r>4)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+t);return i([r,r])}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+t)}}function l(t,e,i){if("object"==typeof i){var o=p(i);Object.defineProperty(t,e,{get:r(o),set:u(i),enumerable:!0,configurable:!1})}else a[i]?Object.defineProperty(t,e,{get:s(i),set:u(i),enumerable:!0,configurable:!1}):t[e]=c(n[i].type)}function p(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var r=0;r<t.length;++r)l(e,r,t[r])}else{e={};for(var n in t)l(e,n,t[n])}return e}var d=o(n,!0);return{get:r(p(d)),set:u(d),enumerable:!0,configurable:!0}}var i=t("dup"),o=t("./reflect");e.exports=n},{"./reflect":27,dup:28}],27:[function(t,e){"use strict";function r(t,e){for(var r={},n=0;n<t.length;++n)for(var i=t[n].name,o=i.split("."),a=r,s=0;s<o.length;++s){var h=o[s].split("[");if(h.length>1){h[0]in a||(a[h[0]]=[]),a=a[h[0]];for(var f=1;f<h.length;++f){var u=parseInt(h[f]);f<h.length-1||s<o.length-1?(u in a||(a[u]=f<h.length-1?[]:{}),a=a[u]):a[u]=e?n:t[n].type}}else s<o.length-1?(h[0]in a||(a[h[0]]={}),a=a[h[0]]):a[h[0]]=e?n:t[n].type}return r}e.exports=r},{}],28:[function(t,e){"use strict";function r(t,e,n){var i=0|t[n];if(0>=i)return[];var o,a=new Array(i);if(n===t.length-1)for(o=0;i>o;++o)a[o]=e;else for(o=0;i>o;++o)a[o]=r(t,e,n+1);return a}function n(t,e){var r,n;for(r=new Array(t),n=0;t>n;++n)r[n]=e;return r}function i(t,e){switch("undefined"==typeof e&&(e=0),typeof t){case"number":if(t>0)return n(0|t,e);break;case"object":if("number"==typeof t.length)return r(t,e,0)}return[]}e.exports=i},{}],29:[function(t,e){"use strict";function r(t,e,r,n){this.gl=t,this.handle=e,this.attributes=null,this.uniforms=null,this.types=null,this.vertexShader=r,this.fragmentShader=n}function n(t,e,r,n){for(var i=0;i<n.length;++i)r[i]=t.getUniformLocation(e,n[i].name)}function i(t,e,n,i,o){var a=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(a,e),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(a);throw console.error("gl-shader: Error compling vertex shader:",s),new Error("gl-shader: Error compiling vertex shader:"+s)}var h=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(h,n),t.compileShader(h),!t.getShaderParameter(h,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(h);throw console.error("gl-shader: Error compiling fragment shader:",s),new Error("gl-shader: Error compiling fragment shader:"+s)}var f=t.createProgram();if(t.attachShader(f,h),t.attachShader(f,a),o.forEach(function(e){"number"==typeof e.location&&t.bindAttribLocation(f,e.location,e.name)}),t.linkProgram(f),!t.getProgramParameter(f,t.LINK_STATUS)){var s=t.getProgramInfoLog(f);throw console.error("gl-shader: Error linking shader program:",s),new Error("gl-shader: Error linking shader program:"+s)}var u=new r(t,f,a,h);return u.updateExports(i,o),u}var o=t("./lib/create-uniforms"),a=t("./lib/create-attributes"),s=t("./lib/reflect");r.prototype.bind=function(){this.gl.useProgram(this.handle)},r.prototype.dispose=function(){var t=this.gl;t.deleteShader(this.vertexShader),t.deleteShader(this.fragmentShader),t.deleteProgram(this.handle)},r.prototype.updateExports=function(t,e){var r=new Array(t.length),i=this.handle,h=this.gl,f=n.bind(void 0,h,i,r,t);f(),this.types={uniforms:s(t),attributes:s(e)},this.attributes=a(h,i,e,f),Object.defineProperty(this,"uniforms",o(h,i,t,r))},e.exports=i},{"./lib/create-attributes":25,"./lib/create-uniforms":26,"./lib/reflect":27}],30:[function(t,e){function r(t,e){if(!(this instanceof r))return new r(t,e);e=e||{},this.gl=t,this.texture=n(t,e);var a=window.devicePixelRatio||1;this.size="number"==typeof e.size?e.size:32*a,this.shader=e.shader||o(t,{texcoord:!0,color:!0}),this.batch=e.batch||i(t,{capacity:1}),this.sprite={texture:this.texture,position:[-1,-1],shape:[2,2],texcoord:[0,0,1,1]}}var n=t("gl-checker-texture"),i=t("gl-sprite-batch"),o=t("gl-basic-shader");r.prototype.dispose=function(){this.batch.dispose(),this.shader.dispose(),this.texture.dispose()},r.prototype.push=function(t,e){t="number"==typeof t?t:this.gl.canvas.width,e="number"==typeof e?e:this.gl.canvas.height;var r=this.size;this.sprite.texcoord[2]=Math.round(t/r),this.sprite.texcoord[3]=Math.round(e/r),this.batch.push(this.sprite)},r.prototype.draw=function(t,e){this.batch.clear(),this.batch.bind(this.shader),this.push(t,e),this.batch.draw(),this.batch.unbind()},e.exports=r},{"gl-basic-shader":24,"gl-checker-texture":31,"gl-sprite-batch":58}],31:[function(t,e){var r=t("gl-texture2d"),n=t("ndarray"),i=[[255,255,255,255],[204,204,204,255]];e.exports=function(t,e){e=e||{},e.colors=e.colors||i,data=[e.colors[0],e.colors[1],e.colors[1],e.colors[0]].reduce(function(t,e){return t.concat(e)});var o=n(new Uint8Array(data),[2,2,4]),a=r(t,o);return a.minFilter=t.NEAREST,a.magFilter=t.NEAREST,a.wrap=t.REPEAT,a}},{"gl-texture2d":87,ndarray:101}],32:[function(t,e){function r(t){return{color:i(t.color,[0,0,0,1]),depth:n(t.depth,1),stencil:n(t.stencil,!1)}}function n(t,e){return t===!1?!1:"undefined"==typeof t?e:t+0}function i(t,e){return t===!1?!1:Array.isArray(t)?t||e:e}e.exports=r},{}],33:[function(t,e){function r(t){t=n(t||{});var e=t.stencil,r=t.color,i=t.depth;return function(t){var n=0;return r!==!1&&(t.clearColor(r[0],r[1],r[2],r[3]),n|=t.COLOR_BUFFER_BIT),i!==!1&&(t.clearDepth(i),n|=t.DEPTH_BUFFER_BIT),e!==!1&&(t.clearStencil(e),n|=t.STENCIL_BUFFER_BIT),t.clear(n),t}}var n=t("./defaults");e.exports=r},{"./defaults":32}],34:[function(t,e){function r(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],h=e[6],f=e[7],u=e[8],c=e[9],l=e[10],p=e[11],d=e[12],g=e[13],y=e[14],v=e[15];return t[0]=s*(l*v-p*y)-c*(h*v-f*y)+g*(h*p-f*l),t[1]=-(n*(l*v-p*y)-c*(i*v-o*y)+g*(i*p-o*l)),t[2]=n*(h*v-f*y)-s*(i*v-o*y)+g*(i*f-o*h),t[3]=-(n*(h*p-f*l)-s*(i*p-o*l)+c*(i*f-o*h)),t[4]=-(a*(l*v-p*y)-u*(h*v-f*y)+d*(h*p-f*l)),t[5]=r*(l*v-p*y)-u*(i*v-o*y)+d*(i*p-o*l),t[6]=-(r*(h*v-f*y)-a*(i*v-o*y)+d*(i*f-o*h)),t[7]=r*(h*p-f*l)-a*(i*p-o*l)+u*(i*f-o*h),t[8]=a*(c*v-p*g)-u*(s*v-f*g)+d*(s*p-f*c),t[9]=-(r*(c*v-p*g)-u*(n*v-o*g)+d*(n*p-o*c)),t[10]=r*(s*v-f*g)-a*(n*v-o*g)+d*(n*f-o*s),t[11]=-(r*(s*p-f*c)-a*(n*p-o*c)+u*(n*f-o*s)),t[12]=-(a*(c*y-l*g)-u*(s*y-h*g)+d*(s*l-h*c)),t[13]=r*(c*y-l*g)-u*(n*y-i*g)+d*(n*l-i*c),t[14]=-(r*(s*y-h*g)-a*(n*y-i*g)+d*(n*h-i*s)),t[15]=r*(s*l-h*c)-a*(n*l-i*c)+u*(n*h-i*s),t}e.exports=r},{}],35:[function(t,e){function r(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}e.exports=r},{}],36:[function(t,e){function r(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}e.exports=r},{}],37:[function(t,e){function r(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=r},{}],38:[function(t,e){function r(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],h=t[7],f=t[8],u=t[9],c=t[10],l=t[11],p=t[12],d=t[13],g=t[14],y=t[15],v=e*a-r*o,_=e*s-n*o,x=e*h-i*o,m=r*s-n*a,w=r*h-i*a,b=n*h-i*s,E=f*d-u*p,A=f*g-c*p,T=f*y-l*p,R=u*g-c*d,I=u*y-l*d,j=c*y-l*g;return v*j-_*I+x*R+m*T-w*A+b*E}e.exports=r},{}],39:[function(t,e){function r(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,h=i+i,f=r*a,u=n*a,c=n*s,l=i*a,p=i*s,d=i*h,g=o*a,y=o*s,v=o*h;return t[0]=1-c-d,t[1]=u+v,t[2]=l-y,t[3]=0,t[4]=u-v,t[5]=1-f-d,t[6]=p+g,t[7]=0,t[8]=l+y,t[9]=p-g,t[10]=1-f-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=r},{}],40:[function(t,e){function r(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,h=i+i,f=o+o,u=n*s,c=n*h,l=n*f,p=i*h,d=i*f,g=o*f,y=a*s,v=a*h,_=a*f;return t[0]=1-(p+g),t[1]=c+_,t[2]=l-v,t[3]=0,t[4]=c-_,t[5]=1-(u+g),t[6]=d+y,t[7]=0,t[8]=l+v,t[9]=d-y,t[10]=1-(u+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}e.exports=r},{}],41:[function(t,e){function r(t,e,r,n,i,o,a){var s=1/(r-e),h=1/(i-n),f=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*h,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*h,t[10]=(a+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*f,t[15]=0,t}e.exports=r},{}],42:[function(t,e){function r(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=r},{}],43:[function(t,e){e.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotationTranslation:t("./fromRotationTranslation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}
},{"./adjoint":34,"./clone":35,"./copy":36,"./create":37,"./determinant":38,"./fromQuat":39,"./fromRotationTranslation":40,"./frustum":41,"./identity":42,"./invert":44,"./lookAt":45,"./multiply":46,"./ortho":47,"./perspective":48,"./rotate":49,"./rotateX":50,"./rotateY":51,"./rotateZ":52,"./scale":53,"./str":54,"./translate":55,"./transpose":56}],44:[function(t,e){function r(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],h=e[6],f=e[7],u=e[8],c=e[9],l=e[10],p=e[11],d=e[12],g=e[13],y=e[14],v=e[15],_=r*s-n*a,x=r*h-i*a,m=r*f-o*a,w=n*h-i*s,b=n*f-o*s,E=i*f-o*h,A=u*g-c*d,T=u*y-l*d,R=u*v-p*d,I=c*y-l*g,j=c*v-p*g,S=l*v-p*y,P=_*S-x*j+m*I+w*R-b*T+E*A;return P?(P=1/P,t[0]=(s*S-h*j+f*I)*P,t[1]=(i*j-n*S-o*I)*P,t[2]=(g*E-y*b+v*w)*P,t[3]=(l*b-c*E-p*w)*P,t[4]=(h*R-a*S-f*T)*P,t[5]=(r*S-i*R+o*T)*P,t[6]=(y*m-d*E-v*x)*P,t[7]=(u*E-l*m+p*x)*P,t[8]=(a*j-s*R+f*A)*P,t[9]=(n*R-r*j-o*A)*P,t[10]=(d*b-g*m+v*_)*P,t[11]=(c*m-u*b-p*_)*P,t[12]=(s*T-a*I-h*A)*P,t[13]=(r*I-n*T+i*A)*P,t[14]=(g*x-d*w-y*_)*P,t[15]=(u*w-c*x+l*_)*P,t):null}e.exports=r},{}],45:[function(t,e){function r(t,e,r,n){var i,o,a,s,h,f,u,c,l,p,d=e[0],g=e[1],y=e[2],v=n[0],_=n[1],x=n[2],m=r[0],w=r[1],b=r[2];return Math.abs(d-m)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(y-b)<1e-6?mat4.identity(t):(u=d-m,c=g-w,l=y-b,p=1/Math.sqrt(u*u+c*c+l*l),u*=p,c*=p,l*=p,i=_*l-x*c,o=x*u-v*l,a=v*c-_*u,p=Math.sqrt(i*i+o*o+a*a),p?(p=1/p,i*=p,o*=p,a*=p):(i=0,o=0,a=0),s=c*a-l*o,h=l*i-u*a,f=u*o-c*i,p=Math.sqrt(s*s+h*h+f*f),p?(p=1/p,s*=p,h*=p,f*=p):(s=0,h=0,f=0),t[0]=i,t[1]=s,t[2]=u,t[3]=0,t[4]=o,t[5]=h,t[6]=c,t[7]=0,t[8]=a,t[9]=f,t[10]=l,t[11]=0,t[12]=-(i*d+o*g+a*y),t[13]=-(s*d+h*g+f*y),t[14]=-(u*d+c*g+l*y),t[15]=1,t)}e.exports=r},{}],46:[function(t,e){function r(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],h=e[5],f=e[6],u=e[7],c=e[8],l=e[9],p=e[10],d=e[11],g=e[12],y=e[13],v=e[14],_=e[15],x=r[0],m=r[1],w=r[2],b=r[3];return t[0]=x*n+m*s+w*c+b*g,t[1]=x*i+m*h+w*l+b*y,t[2]=x*o+m*f+w*p+b*v,t[3]=x*a+m*u+w*d+b*_,x=r[4],m=r[5],w=r[6],b=r[7],t[4]=x*n+m*s+w*c+b*g,t[5]=x*i+m*h+w*l+b*y,t[6]=x*o+m*f+w*p+b*v,t[7]=x*a+m*u+w*d+b*_,x=r[8],m=r[9],w=r[10],b=r[11],t[8]=x*n+m*s+w*c+b*g,t[9]=x*i+m*h+w*l+b*y,t[10]=x*o+m*f+w*p+b*v,t[11]=x*a+m*u+w*d+b*_,x=r[12],m=r[13],w=r[14],b=r[15],t[12]=x*n+m*s+w*c+b*g,t[13]=x*i+m*h+w*l+b*y,t[14]=x*o+m*f+w*p+b*v,t[15]=x*a+m*u+w*d+b*_,t}e.exports=r},{}],47:[function(t,e){function r(t,e,r,n,i,o,a){var s=1/(e-r),h=1/(n-i),f=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*h,t[14]=(a+o)*f,t[15]=1,t}e.exports=r},{}],48:[function(t,e){function r(t,e,r,n,i){var o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t}e.exports=r},{}],49:[function(t,e){function r(t,e,r,n){var i,o,a,s,h,f,u,c,l,p,d,g,y,v,_,x,m,w,b,E,A,T,R,I,j=n[0],S=n[1],P=n[2],U=Math.sqrt(j*j+S*S+P*P);return Math.abs(U)<1e-6?null:(U=1/U,j*=U,S*=U,P*=U,i=Math.sin(r),o=Math.cos(r),a=1-o,s=e[0],h=e[1],f=e[2],u=e[3],c=e[4],l=e[5],p=e[6],d=e[7],g=e[8],y=e[9],v=e[10],_=e[11],x=j*j*a+o,m=S*j*a+P*i,w=P*j*a-S*i,b=j*S*a-P*i,E=S*S*a+o,A=P*S*a+j*i,T=j*P*a+S*i,R=S*P*a-j*i,I=P*P*a+o,t[0]=s*x+c*m+g*w,t[1]=h*x+l*m+y*w,t[2]=f*x+p*m+v*w,t[3]=u*x+d*m+_*w,t[4]=s*b+c*E+g*A,t[5]=h*b+l*E+y*A,t[6]=f*b+p*E+v*A,t[7]=u*b+d*E+_*A,t[8]=s*T+c*R+g*I,t[9]=h*T+l*R+y*I,t[10]=f*T+p*R+v*I,t[11]=u*T+d*R+_*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}e.exports=r},{}],50:[function(t,e){function r(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],h=e[7],f=e[8],u=e[9],c=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+f*n,t[5]=a*i+u*n,t[6]=s*i+c*n,t[7]=h*i+l*n,t[8]=f*i-o*n,t[9]=u*i-a*n,t[10]=c*i-s*n,t[11]=l*i-h*n,t}e.exports=r},{}],51:[function(t,e){function r(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],h=e[3],f=e[8],u=e[9],c=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-f*n,t[1]=a*i-u*n,t[2]=s*i-c*n,t[3]=h*i-l*n,t[8]=o*n+f*i,t[9]=a*n+u*i,t[10]=s*n+c*i,t[11]=h*n+l*i,t}e.exports=r},{}],52:[function(t,e){function r(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],h=e[3],f=e[4],u=e[5],c=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+f*n,t[1]=a*i+u*n,t[2]=s*i+c*n,t[3]=h*i+l*n,t[4]=f*i-o*n,t[5]=u*i-a*n,t[6]=c*i-s*n,t[7]=l*i-h*n,t}e.exports=r},{}],53:[function(t,e){function r(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}e.exports=r},{}],54:[function(t,e){function r(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}e.exports=r},{}],55:[function(t,e){function r(t,e,r){var n,i,o,a,s,h,f,u,c,l,p,d,g=r[0],y=r[1],v=r[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*v+e[12],t[13]=e[1]*g+e[5]*y+e[9]*v+e[13],t[14]=e[2]*g+e[6]*y+e[10]*v+e[14],t[15]=e[3]*g+e[7]*y+e[11]*v+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],h=e[5],f=e[6],u=e[7],c=e[8],l=e[9],p=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=h,t[6]=f,t[7]=u,t[8]=c,t[9]=l,t[10]=p,t[11]=d,t[12]=n*g+s*y+c*v+e[12],t[13]=i*g+h*y+l*v+e[13],t[14]=o*g+f*y+p*v+e[14],t[15]=a*g+u*y+d*v+e[15]),t}e.exports=r},{}],56:[function(t,e){function r(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}e.exports=r},{}],57:[function(t,e){function r(t){for(var e=6*t,r=new Uint16Array(e),n=0,i=0;e>n;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}var n=t("gl-aliased-vao"),i=t("gl-buffer");e.exports.floatsPerVertex=5,e.exports.mixins={create:function(t){t=t||{},this.clear(),this.vao&&this.dispose();var o="number"==typeof t.capacity?t.capacity:100;if(o>10922)throw new Error("Can't have more than 10922 quads per batch: "+o);this._capacity=o;var a=4*o*e.exports.floatsPerVertex;this.vertices=new Float32Array(a),this.indices=r(o);var s=this.gl,h=t.dynamic?s.DYNAMIC_DRAW:s.STATIC_DRAW;this.vertexBuffer=i(s,this.vertices,s.ARRAY_BUFFER,h),this.indexBuffer=i(s,this.indices,s.ELEMENT_ARRAY_BUFFER,s.STATIC_DRAW);var f=20;return this.vao=n(s,[{name:"position",buffer:this.vertexBuffer,size:2,stride:f},{name:"texcoord0",buffer:this.vertexBuffer,size:2,offset:8,stride:f},{name:"color",buffer:this.vertexBuffer,size:4,stride:f,offset:16,type:s.UNSIGNED_BYTE,normalized:!0}],this.indexBuffer),this},ensureCapacity:function(t){return this.capacity<t&&this.create({capacity:t}),this}}},{"gl-aliased-vao":59,"gl-buffer":62}],58:[function(t,e){function r(t,e){if(!(this instanceof r))return new r(t,e);if(!t)throw new Error("must specify gl context");this.gl=t,e=e||{},this._bound=!1,this.idx=0,this.transform=null,this._defaultTexture=e.defaultTexture||h(t),this._ownsDefault=!e.defaultTexture,this._lastTexture=this._defaultTexture,this._texture=this._defaultTexture,this.texture=null,this.mode="number"==typeof e.mode?e.mode:t.TRIANGLES,this.premultiplied=e.premultiplied||!1,this._dirty=!0,this.create(e),this.defaults()}function n(t,e,r){return t[0]=e,t[1]=r,t}function i(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}var o=t("./pack-rgba-float"),a=t("mixes"),s=t("premultiplied-rgba"),h=t("gl-white-texture"),f=t("./common").floatsPerVertex,u=[0,0],c=[0,0],l=[0,0,0,0],p=[0,0,0,0],d=[0,0,0,0];a(r,t("./common").mixins),a(r,{capacity:{get:function(){return this._capacity}},texture:{get:function(){return this._texture},set:function(t){this._texture=t||this._defaultTexture}},dispose:function(){this.vertexBuffer&&this.vertexBuffer.dispose(),this.indexBuffer&&this.indexBuffer.dispose(),this.vao&&this.vao.dispose(),this._ownsDefault&&this._defaultTexture.dispose()},clear:function(){return this.idx=0,this},bind:function(t){t.bind(),this.vao.bind(t),this._bound=!0},unbind:function(){this.vao.unbind(),this._bound=!1},defaults:function(){return this.position=n(u,0,0),this.texcoord=i(l,0,0,1,1),this.color=i(p,1,1,1,1),this.shape=n(c,0,0),this},push:function(t){if(t&&(this.texture=t.texture,this.position=t.position||n(u,0,0),this.texcoord=t.texcoord||i(l,0,0,1,1),this.color=t.color||i(p,1,1,1,1),this.shape=t.shape||n(c,0,0)),this.texture!==this._lastTexture)this._bound&&this.flush(),this._lastTexture=this.texture;else if(this.idx===this.vertices.length){if(!this._bound)return this;this.flush()}this._dirty=!0;var e=this.premultiplied?s(this.color,d):this.color,r=o(e),a=this.texcoord[0],h=this.texcoord[1],f=this.texcoord[2],g=this.texcoord[3],y=this.position[0],v=this.position[1],_=this.shape[0],x=this.shape[1];return this._vert(y,v,a,h,r),this._vert(y+_,v,f,h,r),this._vert(y+_,v+x,f,g,r),this._vert(y,v+x,a,g,r),this},_vert:function(t,e,r,n,i){var o=this.idx,a=this.vertices,s=this.transform;if(s){var h=t,f=e;t=s[0]*h+s[4]*f+s[12],e=s[1]*h+s[5]*f+s[13]}a[o++]=t,a[o++]=e,a[o++]=r,a[o++]=n,a[o++]=i,this.idx=o},flush:function(){return this.draw(),this.clear()},draw:function(){if(0===this.idx||!this._bound)return this;this.gl;if(this._dirty){var t=this.vertices.subarray(0,this.idx);this.vertexBuffer.update(t,0),this._dirty=!1}this._lastTexture&&this._lastTexture.bind(),this._lastTexture=this.texture;var e=this.idx/(4*f);return e>0&&this.vao.draw(this.mode,6*e,0),this}}),e.exports=r},{"./common":57,"./pack-rgba-float":76,"gl-white-texture":88,mixes:73,"premultiplied-rgba":75}],59:[function(t,e){function r(t,e,r,i){var o=n(t);return o.update(e,r,i),o}var n=t("./lib/vao-emulated.js");e.exports=r},{"./lib/vao-emulated.js":61}],60:[function(t,e){function r(t,e){if(!t)return null;var r=e.attributes;return r[t]?r[t].location:null}function n(t,e,n,a){if(e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),null===i&&(i=0|t.getParameter(t.MAX_VERTEX_ATTRIBS),o=new Array(i)),n){if(n.length>i)throw new Error("gl-vao: Too many vertex attributes");var s=null;for(y=0;i>y;y++)o[y]=!1;for(y=0;y<n.length;y++){var h=n[y],f=r(h.name,a);if(null!==f)if(o[f]=!0,h.buffer){var u=h.buffer,c=h.size||4,l=h.type||t.FLOAT,p=!!h.normalized,d=h.stride||0,g=h.offset||0;s!==u&&(u.bind(),s=u),t.enableVertexAttribArray(f),t.vertexAttribPointer(f,c,l,p,d,g)}else{if("number"==typeof h)t.vertexAttrib1f(f,h);else if(1===h.length)t.vertexAttrib1f(f,h[0]);else if(2===h.length)t.vertexAttrib2f(f,h[0],h[1]);else if(3===h.length)t.vertexAttrib3f(f,h[0],h[1],h[2]);else{if(4!==h.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(f,h[0],h[1],h[2],h[3])}t.disableVertexAttribArray(f)}}for(y=0;i>y;y++)o[y]||t.disableVertexAttribArray(y)}else{t.bindBuffer(t.ARRAY_BUFFER,null);for(var y=0;i>y;++y)t.disableVertexAttribArray(y)}}var i=null,o=null;e.exports=n},{}],61:[function(t,e){function r(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}function n(t){return new r(t)}var i=t("./do-bind.js");r.prototype.bind=function(t){if(!t)throw new Error("must associate shader with vertex array");i(this.gl,this._elements,this._attributes,t)},r.prototype.update=function(t,e,r){this._elements=e,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){i(this.gl)},r.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._elements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)},e.exports=n},{"./do-bind.js":60}],62:[function(t,e){"use strict";function r(t,e,r,n,i){this.gl=t,this.type=e,this.handle=r,this.length=n,this.usage=i}function n(t,e,r,n,i,o){var a=i.length*i.BYTES_PER_ELEMENT;if(0>o)return t.bufferData(e,i,n),a;if(a+o>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,o,i),r}function i(t,e){for(var r=s.malloc(t.length,e),n=t.length,i=0;n>i;++i)r[i]=t[i];return r}function o(t,e){for(var r=1,n=e.length-1;n>=0;--n){if(e[n]!==r)return!1;r*=t[n]}return!0}function a(t,e,n,i){if(u(t),n=n||t.ARRAY_BUFFER,i=i||t.DYNAMIC_DRAW,n!==t.ARRAY_BUFFER&&n!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(i!==t.DYNAMIC_DRAW&&i!==t.STATIC_DRAW&&i!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var o=t.createBuffer(),a=new r(t,n,o,0,i);return a.update(e),a}var s=t("typedarray-pool"),h=t("ndarray-ops"),f=t("ndarray"),u=t("webglew"),c=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],l=r.prototype;l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)},l.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&"undefined"!=typeof t.shape){var r=t.dtype;if(c.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var a=u(this.gl),l=a.OES_element_index_uint;r=l&&"uint16"!==r?"uint32":"uint16"}if(r===t.dtype&&o(t.shape,t.stride))this.length=0===t.offset&&t.data.length===t.shape[0]?n(this.gl,this.type,this.length,this.usage,t.data,e):n(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var p=s.malloc(t.size,r),d=f(p,t.shape);h.assign(d,t),this.length=0>e?n(this.gl,this.type,this.length,this.usage,p,e):n(this.gl,this.type,this.length,this.usage,p.subarray(0,t.size),e),s.free(p)}}else if(Array.isArray(t)){var g;g=this.type===this.gl.ELEMENT_ARRAY_BUFFER?i(t,"uint16"):i(t,"float32"),this.length=0>e?n(this.gl,this.type,this.length,this.usage,g,e):n(this.gl,this.type,this.length,this.usage,g.subarray(0,t.length),e),s.free(g)}else if("object"==typeof t&&"number"==typeof t.length)this.length=n(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(e>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");t=0|t,0>=t&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}},e.exports=a},{ndarray:101,"ndarray-ops":63,"typedarray-pool":70,webglew:72}],63:[function(t,e,r){"use strict";function n(t){if(!t)return s;for(var e=0;e<t.args.length;++e){var r=t.args[e];t.args[e]=0===e?{name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function i(t){return a({args:t.args,pre:n(t.pre),body:n(t.body),post:n(t.proc),funcName:t.funcName})}function o(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);var n=new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""));return n(i(t))}var a=t("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},h={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in h){var e=h[t];r[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),r[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),r[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),r[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}}();var f={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in f){var e=f[t];r[t]=o({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),r[t+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in u){var e=u[t];r[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),r[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),r[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<c.length;++t){var e=c[t];r[e]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),r[e+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var l=["max","min","atan2","pow"];!function(){for(var t=0;t<l.length;++t){var e=l[t];r[e]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),r[e+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),r[e+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var p=["atan2","pow"];!function(){for(var t=0;t<p.length;++t){var e=p[t];r[e+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),r[e+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),r[e+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),r[e+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),r.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":64}],64:[function(t,e){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function n(t){var e=new r;e.pre=t.pre,e.body=t.body,e.post=t.post;var n=t.args.slice(0);e.argTypes=n;for(var o=0;o<n.length;++o){var a=n[o];if("array"===a){if(e.arrayArgs.push(o),e.shimArgs.push("array"+o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(o),e.shimArgs.push("scalar"+o);else if("index"===a){if(e.indexArgs.push(o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(o),o<e.pre.args.length&&e.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<e.post.args.length&&e.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[o]);e.argTypes[o]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(o)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,i(e)}var i=t("./lib/thunk.js");e.exports=n},{"./lib/thunk.js":66}],65:[function(t,e){"use strict";function r(t,e,r){var n,i,o=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,h=[],f=[],u=0,c=0;for(n=0;o>n;++n)f.push(["i",n,"=0"].join(""));for(i=0;a>i;++i)for(n=0;o>n;++n)c=u,u=t[n],f.push(0===n?["d",i,"s",n,"=t",i,"p",u].join(""):["d",i,"s",n,"=(t",i,"p",u,"-s",c,"*t",i,"p",c,")"].join(""));for(h.push("var "+f.join(",")),n=o-1;n>=0;--n)u=t[n],h.push(["for(i",n,"=0;i",n,"<s",u,";++i",n,"){"].join(""));for(h.push(r),n=0;o>n;++n){for(c=u,u=t[n],i=0;a>i;++i)h.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&h.push(["index[",c,"]-=s",c].join("")),h.push(["++index[",u,"]"].join(""))),h.push("}")}return h.join("\n")}function n(t,e,n,i){for(var o=e.length,a=n.arrayArgs.length,s=n.blockSize,h=n.indexArgs.length>0,f=[],u=0;a>u;++u)f.push(["var offset",u,"=p",u].join(""));for(var u=t;o>u;++u)f.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),f.push(["if(j",u,"<",s,"){"].join("")),f.push(["s",e[u],"=j",u].join("")),f.push(["j",u,"=0"].join("")),f.push(["}else{s",e[u],"=",s].join("")),f.push(["j",u,"-=",s,"}"].join("")),h&&f.push(["index[",e[u],"]=j",u].join(""));for(var u=0;a>u;++u){for(var c=["offset"+u],l=t;o>l;++l)c.push(["j",l,"*t",u,"p",e[l]].join(""));f.push(["p",u,"=(",c.join("+"),")"].join(""))}f.push(r(e,n,i));for(var u=t;o>u;++u)f.push("}");return f.join("\n")}function i(t){for(var e=0,r=t[0].length;r>e;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function o(t,e,r){for(var n=t.body,i=[],o=[],a=0;a<t.args.length;++a){var s=t.args[a];if(!(s.count<=0)){var h=new RegExp(s.name,"g"),f="",u=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var c=e.offsetArgIndex.indexOf(a),l=e.offsetArgs[c];u=l.array,f="+q"+c;case"array":f="p"+u+f;var p="l"+a,d="a"+u;1===s.count?"generic"===r[u]?s.lvalue?(i.push(["var ",p,"=",d,".get(",f,")"].join("")),n=n.replace(h,p),o.push([d,".set(",f,",",p,")"].join(""))):n=n.replace(h,[d,".get(",f,")"].join("")):n=n.replace(h,[d,"[",f,"]"].join("")):"generic"===r[u]?(i.push(["var ",p,"=",d,".get(",f,")"].join("")),n=n.replace(h,p),s.lvalue&&o.push([d,".set(",f,",",p,")"].join(""))):(i.push(["var ",p,"=",d,"[",f,"]"].join("")),n=n.replace(h,p),s.lvalue&&o.push([d,"[",f,"]=",p].join("")));break;case"scalar":n=n.replace(h,"Y"+e.scalarArgs.indexOf(a));break;case"index":n=n.replace(h,"index");break;case"shape":n=n.replace(h,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}function a(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],o=i.match(/\d+/);o=o?o[0]:"",e[n]=0===i.charAt(0)?"u"+i.charAt(1)+o:i.charAt(0)+o,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function s(t,e){for(var s=0|e[1].length,f=new Array(t.arrayArgs.length),u=new Array(t.arrayArgs.length),c=["SS"],l=["'use strict'"],p=[],d=0;s>d;++d)p.push(["s",d,"=SS[",d,"]"].join(""));for(var g=0;g<t.arrayArgs.length;++g){c.push("a"+g),c.push("t"+g),c.push("p"+g),u[g]=e[2*g],f[g]=e[2*g+1];for(var d=0;s>d;++d)p.push(["t",g,"p",d,"=t",g,"[",d,"]"].join(""))}for(var g=0;g<t.scalarArgs.length;++g)c.push("Y"+g);if(t.shapeArgs.length>0&&p.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var y=new Array(s),g=0;s>g;++g)y[g]="0";p.push(["index=[",y.join(","),"]"].join(""))}for(var g=0;g<t.offsetArgs.length;++g){for(var v=t.offsetArgs[g],_=[],d=0;d<v.offset.length;++d)0!==v.offset[d]&&_.push(1===v.offset[d]?["t",v.array,"p",d].join(""):[v.offset[d],"*t",v.array,"p",d].join(""));p.push(0===_.length?"q"+g+"=0":["q",g,"=",_.join("+")].join(""))}var x=h([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));p=p.concat(x),l.push("var "+p.join(","));for(var g=0;g<t.arrayArgs.length;++g)l.push("p"+g+"|=0");t.pre.body.length>3&&l.push(o(t.pre,t,u));var m=o(t.body,t,u),w=i(f);l.push(s>w?n(w,f[0],t,m):r(f[0],t,m)),t.post.body.length>3&&l.push(o(t.post,t,u)),t.debug&&console.log("Generated cwise routine for ",e,":\n\n",l.join("\n"));var b=[t.funcName||"unnamed","_cwise_loop_",f[0].join("s"),"m",w,a(u)].join(""),E=new Function(["function ",b,"(",c.join(","),"){",l.join("\n"),"} return ",b].join(""));return E()}var h=t("uniq");e.exports=s},{uniq:67}],66:[function(t,e){"use strict";function r(t){var e=["'use strict'","var CACHED={}"],r=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",t.arrayArgs[0],".shape"].join("")],h=0;h<t.arrayArgs.length;++h){var f=t.arrayArgs[h];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),o.push("t"+f),o.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0")}for(var h=0;h<t.scalarArgs.length;++h)s.push("scalar"+t.scalarArgs[h]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("Generated thunk:",e.join("\n"));var u=new Function("compile",e.join("\n"));return u(n.bind(void 0,t))}var n=t("./compile.js");e.exports=r},{"./compile.js":65}],67:[function(t,e){"use strict";function r(t,e){for(var r=1,n=t.length,i=t[0],o=t[0],a=1;n>a;++a)if(o=i,i=t[a],e(i,o)){if(a===r){r++;continue}t[r++]=i}return t.length=r,t}function n(t){for(var e=1,r=t.length,n=t[0],i=t[0],o=1;r>o;++o,i=n)if(i=n,n=t[o],n!==i){if(o===e){e++;continue}t[e++]=n}return t.length=e,t}function i(t,e,i){return 0===t.length?t:e?(i||t.sort(e),r(t,e)):(i||t.sort(),n(t))}e.exports=i},{}],68:[function(t,e,r){"use strict";"use restrict";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var i=32;r.INT_BITS=i,r.INT_MAX=2147483647,r.INT_MIN=-1<<i-1,r.sign=function(t){return(t>0)-(0>t)},r.abs=function(t){var e=t>>i-1;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(e>t)},r.max=function(t,e){return t^(t^e)&-(e>t)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,e|=r,e|t>>1
},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var o=new Array(256);!function(t){for(var e=0;256>e;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(o),r.reverse=function(t){return o[255&t]<<24|o[t>>>8&255]<<16|o[t>>>16&255]<<8|o[t>>>24&255]},r.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},r.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},r.interleave3=function(t,e,r){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),t|r<<2},r.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],69:[function(t,e,r){arguments[4][28][0].apply(r,arguments)},{dup:28}],70:[function(t,e,r){(function(e,n){"use strict";function i(t){if(t){var e=t.length||t.byteLength,r=_.log2(e);b[r].push(t)}}function o(t){i(t.buffer)}function a(t){var t=_.nextPow2(t),e=_.log2(t),r=b[e];return r.length>0?r.pop():new ArrayBuffer(t)}function s(t){return new Uint8Array(a(t),0,t)}function h(t){return new Uint16Array(a(2*t),0,t)}function f(t){return new Uint32Array(a(4*t),0,t)}function u(t){return new Int8Array(a(t),0,t)}function c(t){return new Int16Array(a(2*t),0,t)}function l(t){return new Int32Array(a(4*t),0,t)}function p(t){return new Float32Array(a(4*t),0,t)}function d(t){return new Float64Array(a(8*t),0,t)}function g(t){return m?new Uint8ClampedArray(a(t),0,t):s(t)}function y(t){return new DataView(a(t),0,t)}function v(t){t=_.nextPow2(t);var e=_.log2(t),r=E[e];return r.length>0?r.pop():new n(t)}var _=t("bit-twiddle"),x=t("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:x([32,0]),UINT16:x([32,0]),UINT32:x([32,0]),INT8:x([32,0]),INT16:x([32,0]),INT32:x([32,0]),FLOAT:x([32,0]),DOUBLE:x([32,0]),DATA:x([32,0]),UINT8C:x([32,0]),BUFFER:x([32,0])});var m="undefined"!=typeof Uint8ClampedArray,w=e.__TYPEDARRAY_POOL;w.UINT8C||(w.UINT8C=x([32,0])),w.BUFFER||(w.BUFFER=x([32,0]));var b=w.DATA,E=w.BUFFER;r.free=function(t){if(n.isBuffer(t))E[_.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,r=0|_.log2(e);b[r].push(t)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=o,r.freeArrayBuffer=i,r.freeBuffer=function(t){E[_.log2(t.length)].push(t)},r.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return a(t);switch(e){case"uint8":return s(t);case"uint16":return h(t);case"uint32":return f(t);case"int8":return u(t);case"int16":return c(t);case"int32":return l(t);case"float":case"float32":return p(t);case"double":case"float64":return d(t);case"uint8_clamped":return g(t);case"buffer":return v(t);case"data":case"dataview":return y(t);default:return null}return null},r.mallocArrayBuffer=a,r.mallocUint8=s,r.mallocUint16=h,r.mallocUint32=f,r.mallocInt8=u,r.mallocInt16=c,r.mallocInt32=l,r.mallocFloat32=r.mallocFloat=p,r.mallocFloat64=r.mallocDouble=d,r.mallocUint8Clamped=g,r.mallocDataView=y,r.mallocBuffer=v,r.clearCache=function(){for(var t=0;32>t;++t)w.UINT8[t].length=0,w.UINT16[t].length=0,w.UINT32[t].length=0,w.INT8[t].length=0,w.INT16[t].length=0,w.INT32[t].length=0,w.FLOAT[t].length=0,w.DOUBLE[t].length=0,w.UINT8C[t].length=0,b[t].length=0,E[t].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"bit-twiddle":68,buffer:4,dup:69}],71:[function(t,e){!function(){"use strict";function t(e){e.permitHostObjects___&&e.permitHostObjects___(t)}function r(t){return!(t.substr(0,p.length)==p&&"___"===t.substr(t.length-3))}function n(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[d];if(e&&e.key===t)return e;if(!l(t))return void 0;e={key:t};try{return c(t,d,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(r){return void 0}}function i(t){return t.prototype=null,Object.freeze(t)}function o(){_||"undefined"==typeof console||(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=t);var a=!1;if("function"==typeof WeakMap){var s=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var h=new s,f=Object.freeze({});if(h.set(f,1),1===h.get(f))return void(e.exports=WeakMap);a=!0}}var u=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),c=Object.defineProperty,l=Object.isExtensible,p="weakmap:",d=p+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var g=new ArrayBuffer(25),y=new Uint8Array(g);crypto.getRandomValues(y),d=p+"rand:"+Array.prototype.map.call(y,function(t){return(t%36).toString(36)}).join("")+"___"}if(c(Object,"getOwnPropertyNames",{value:function(t){return u(t).filter(r)}}),"getPropertyNames"in Object){var v=Object.getPropertyNames;c(Object,"getPropertyNames",{value:function(t){return v(t).filter(r)}})}!function(){var t=Object.freeze;c(Object,"freeze",{value:function(e){return n(e),t(e)}});var e=Object.seal;c(Object,"seal",{value:function(t){return n(t),e(t)}});var r=Object.preventExtensions;c(Object,"preventExtensions",{value:function(t){return n(t),r(t)}})}();var _=!1,x=0,m=function(){function t(t,e){var r,i=n(t);return i?f in i?i[f]:e:(r=s.indexOf(t),r>=0?h[r]:e)}function e(t){var e=n(t);return e?f in e:s.indexOf(t)>=0}function r(t,e){var r,i=n(t);return i?i[f]=e:(r=s.indexOf(t),r>=0?h[r]=e:(r=s.length,h[r]=e,s[r]=t)),this}function a(t){var e,r,i=n(t);return i?f in i&&delete i[f]:(e=s.indexOf(t),0>e?!1:(r=s.length-1,s[e]=void 0,h[e]=h[r],s[e]=s[r],s.length=r,h.length=r,!0))}this instanceof m||o();var s=[],h=[],f=x++;return Object.create(m.prototype,{get___:{value:i(t)},has___:{value:i(e)},set___:{value:i(r)},delete___:{value:i(a)}})};m.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},"delete":{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof s?!function(){function r(){function e(t,e){return u?f.has(t)?f.get(t):u.get___(t,e):f.get(t,e)}function r(t){return f.has(t)||(u?u.has___(t):!1)}function n(t){var e=!!f["delete"](t);return u?u.delete___(t)||e:e}this instanceof m||o();var h,f=new s,u=void 0,c=!1;return h=a?function(t,e){return f.set(t,e),f.has(t)||(u||(u=new m),u.set(t,e)),this}:function(t,e){if(c)try{f.set(t,e)}catch(r){u||(u=new m),u.set___(t,e)}else f.set(t,e);return this},Object.create(m.prototype,{get___:{value:i(e)},has___:{value:i(r)},set___:{value:i(h)},delete___:{value:i(n)},permitHostObjects___:{value:i(function(e){if(e!==t)throw new Error("bogus call to permitHostObjects___");c=!0})}})}a&&"undefined"!=typeof Proxy&&(Proxy=void 0),r.prototype=m.prototype,e.exports=r,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=m)}}()},{}],72:[function(t,e){"use strict";function r(t){return t.replace(/^[A-Z]+_/,"")}function n(t){var e=o.get(t);if(e)return e;for(var n={},i=t.getSupportedExtensions(),a=0;a<i.length;++a){var s=i[a];if(0!==s.indexOf("MOZ_")){var h=t.getExtension(i[a]);if(h)for(;;){n[s]=h;var f=r(s);if(f===s)break;s=f}}}return o.set(t,n),n}var i="undefined"==typeof WeakMap?t("weak-map"):WeakMap,o=new i;e.exports=n},{"weak-map":71}],73:[function(t,e){function r(t,e){for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];if("function"==typeof o)t[r]=o;else if(o&&"object"==typeof o){var a=n(i,o);Object.defineProperty(t,r,a)}}}var n=t("xtend"),i={enumerable:!0,configurable:!0};e.exports=function(t,e){r(t.prototype,e)},e.exports.mix=r},{xtend:104}],74:[function(t,e){var r=new Int8Array(4),n=new Int32Array(r.buffer,0,1),i=new Float32Array(r.buffer,0,1),o=function(){};o.intBitsToFloat=function(t){return n[0]=t,i[0]},o.floatToIntBits=function(t){return i[0]=t,n[0]},o.intToFloatColor=function(t){return o.intBitsToFloat(4278190079&t)},o.colorToFloat=function(t,e,r,n){var i=n<<24|r<<16|e<<8|t;return o.intToFloatColor(i)},o.isPowerOfTwo=function(t){return 0===(t&t-1)},o.nextPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t+1},e.exports=o},{}],75:[function(t,e){function r(t,e){return e&&"number"!=typeof e||(e=[0,0,0,0]),e[0]=t[0]*t[3],e[1]=t[1]*t[3],e[2]=t[2]*t[3],e[3]=t[3],e}e.exports=r},{}],76:[function(t,e){var r=t("number-util").colorToFloat;e.exports=function(t){return r(~~(255*t[0]),~~(255*t[1]),~~(255*t[2]),~~(255*t[3]))}},{"number-util":74}],77:[function(t,e,r){arguments[4][63][0].apply(r,arguments)},{"cwise-compiler":78,dup:63}],78:[function(t,e,r){arguments[4][64][0].apply(r,arguments)},{"./lib/thunk.js":80,dup:64}],79:[function(t,e,r){arguments[4][65][0].apply(r,arguments)},{dup:65,uniq:81}],80:[function(t,e,r){arguments[4][66][0].apply(r,arguments)},{"./compile.js":79,dup:66}],81:[function(t,e,r){arguments[4][67][0].apply(r,arguments)},{dup:67}],82:[function(t,e,r){arguments[4][68][0].apply(r,arguments)},{dup:68}],83:[function(t,e,r){arguments[4][28][0].apply(r,arguments)},{dup:28}],84:[function(t,e,r){arguments[4][70][0].apply(r,arguments)},{"bit-twiddle":82,buffer:4,dup:70}],85:[function(t,e,r){arguments[4][71][0].apply(r,arguments)},{dup:71}],86:[function(t,e,r){arguments[4][72][0].apply(r,arguments)},{dup:72,"weak-map":85}],87:[function(t,e){"use strict";function r(t){y=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],v=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],_=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}function n(t,e,r){var n=t.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(0>e||e>i||0>r||r>i)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),n.texImage2D(n.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function i(t,e,r,n,i,o){this.gl=t,this.handle=e,this.format=i,this.type=o,this._shape=[r,n],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var a=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return a._wrapS},set:function(t){return a.wrapS=t}},{get:function(){return a._wrapT},set:function(t){return a.wrapT=t}}]),this._wrapVector=s;var h=[this._shape[0],this._shape[1]];Object.defineProperties(h,[{get:function(){return a._shape[0]},set:function(t){return a.width=t}},{get:function(){return a._shape[1]},set:function(t){return a.height=t}}]),this._shapeVector=h}function o(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function a(t,e,r,n,i,a,s,h){var f=h.dtype,u=h.shape.slice();if(u.length<2||u.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,g=0,y=o(u,h.stride.slice());"float32"===f?c=t.FLOAT:"float64"===f?(c=t.FLOAT,y=!1,f="float32"):"uint8"===f?c=t.UNSIGNED_BYTE:(c=t.UNSIGNED_BYTE,y=!1,f="uint8");var v=1;if(2===u.length)g=t.LUMINANCE,u=[u[0],u[1],1],h=l(h.data,u,[h.stride[0],h.stride[1],1],h.offset);else{if(3!==u.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===u[2])g=t.ALPHA;else if(2===u[2])g=t.LUMINANCE_ALPHA;else if(3===u[2])g=t.RGB;else{if(4!==u[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");g=t.RGBA}v=u[2]}if(g!==t.LUMINANCE&&g!==t.ALPHA||i!==t.LUMINANCE&&i!==t.ALPHA||(g=i),g!==i)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var _=h.size,m=s.indexOf(n)<0;if(m&&s.push(n),c===a&&y)0===h.offset&&h.data.length===_?m?t.texImage2D(t.TEXTURE_2D,n,i,u[0],u[1],0,i,a,h.data):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],i,a,h.data):m?t.texImage2D(t.TEXTURE_2D,n,i,u[0],u[1],0,i,a,h.data.subarray(h.offset,h.offset+_)):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],i,a,h.data.subarray(h.offset,h.offset+_));else{var w;w=a===t.FLOAT?d.mallocFloat32(_):d.mallocUint8(_);var b=l(w,u,[u[2],u[2]*u[0],1]);c===t.FLOAT&&a===t.UNSIGNED_BYTE?x(b,h):p.assign(b,h),m?t.texImage2D(t.TEXTURE_2D,n,i,u[0],u[1],0,i,a,w.subarray(0,_)):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],i,a,w.subarray(0,_)),a===t.FLOAT?d.freeFloat32(w):d.freeUint8(w)}}function s(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function h(t,e,r,n,o){var a=t.getParameter(t.MAX_TEXTURE_SIZE);if(0>e||e>a||0>r||r>a)throw new Error("gl-texture2d: Invalid texture shape");if(o===t.FLOAT&&!g(t).texture_float)throw new Error("gl-texture2d: Floating point textures not supported on this platform");var h=s(t);return t.texImage2D(t.TEXTURE_2D,0,n,e,r,0,n,o,null),new i(t,h,e,r,n,o)}function f(t,e,r,n){var o=s(t);return t.texImage2D(t.TEXTURE_2D,0,r,r,n,e),new i(t,o,0|e.width,0|e.height,r,n)}function u(t,e){var r=e.dtype,n=e.shape.slice(),a=t.getParameter(t.MAX_TEXTURE_SIZE);if(n[0]<0||n[0]>a||n[1]<0||n[1]>a)throw new Error("gl-texture2d: Invalid texture size");var h=o(n,e.stride.slice()),f=0;"float32"===r?f=t.FLOAT:"float64"===r?(f=t.FLOAT,h=!1,r="float32"):"uint8"===r?f=t.UNSIGNED_BYTE:(f=t.UNSIGNED_BYTE,h=!1,r="uint8");var u=0;if(2===n.length)u=t.LUMINANCE,n=[n[0],n[1],1],e=l(e.data,n,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==n.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===n[2])u=t.ALPHA;else if(2===n[2])u=t.LUMINANCE_ALPHA;else if(3===n[2])u=t.RGB;else{if(4!==n[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");u=t.RGBA}}f!==t.FLOAT||g(t).texture_float||(f=t.UNSIGNED_BYTE,h=!1);var c,y,v=e.size;if(h)c=0===e.offset&&e.data.length===v?e.data:e.data.subarray(e.offset,e.offset+v);else{var _=[n[2],n[2]*n[0],1];y=d.malloc(v,r);var m=l(y,n,_,0);"float32"!==r&&"float64"!==r||f!==t.UNSIGNED_BYTE?p.assign(m,e):x(m,e),c=y.subarray(0,v)}var w=s(t);return t.texImage2D(t.TEXTURE_2D,0,u,n[0],n[1],0,u,f,c),h||d.free(y),new i(t,w,n[0],n[1],u,f)}function c(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(y||r(t),"number"==typeof arguments[1])return h(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return h(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e=arguments[1];if(e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof HTMLVideoElement||e instanceof ImageData)return f(t,e,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return u(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var l=t("ndarray"),p=t("ndarray-ops"),d=t("typedarray-pool"),g=t("webglew");e.exports=c;var y=null,v=null,_=null,x=function(t,e){p.muls(t,e,255)},m=i.prototype;Object.defineProperties(m,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&y.indexOf(t)>=0&&(g(e).texture_float_linear||(t=e.NEAREST)),v.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&y.indexOf(t)>=0&&(g(e).texture_float_linear||(t=e.NEAREST)),v.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=g(this.gl).EXT_texture_filter_anisotropic;r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),_.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),_.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;2>e;++e)if(_.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return n(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return t=0|t,n(this,t,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t=0|t,n(this,this._shape[0],t),t}}}),m.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},m.dispose=function(){this.gl.deleteTexture(this.handle)},m.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},m.setPixels=function(t,e,r,n){var i=this.gl;if(this.bind(),Array.isArray(e)?(n=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),n=n||0,t instanceof HTMLCanvasElement||t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLVideoElement){var o=this._mipLevels.indexOf(n)<0;o?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,t),this._mipLevels.push(n)):i.texSubImage2D(i.TEXTURE_2D,n,e,r,this.format,this.type,t)}else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>n||r+t.shape[0]>this._shape[0]>>>n||0>e||0>r)throw new Error("gl-texture2d: Texture dimensions are out of bounds");a(i,e,r,n,this.format,this.type,this._mipLevels,t)}}},{ndarray:101,"ndarray-ops":77,"typedarray-pool":84,webglew:86}],88:[function(t,e){var r=t("gl-texture2d"),n=t("ndarray");e.exports=function(t){var e=Array.apply(null,new Array(16)).map(Number.prototype.valueOf,255),i=n(new Uint8Array(e),[2,2,4]);return r(t,i)}},{"gl-texture2d":87,ndarray:89}],89:[function(t,e){(function(r){function n(t,e){return t[0]-e[0]}function i(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(n);var i=new Array(r.length);for(t=0;t<i.length;++t)i[t]=r[t][1];return i}function o(t,e){var r=["View",e,"d",t].join("");0>e&&(r="View_Nil"+t);var n="generic"===t;if(-1===e){var o="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",a=new Function(o);return a()}if(0===e){var o="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",a=new Function("TrivialArray",o);return a(l[t][0])}var o=["'use strict'"],s=h(e),u=s.map(function(t){return"i"+t}),c="this.offset+"+s.map(function(t){return"this._stride"+t+"*i"+t}).join("+");o.push("function "+r+"(a,"+s.map(function(t){return"b"+t}).join(",")+","+s.map(function(t){return"c"+t}).join(",")+",d){this.data=a");for(var p=0;e>p;++p)o.push("this._shape"+p+"=b"+p+"|0");for(var p=0;e>p;++p)o.push("this._stride"+p+"=c"+p+"|0");o.push("this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e);var d="VStride"+e+"d"+t,g="VShape"+e+"d"+t,y={stride:d,shape:g};for(var v in y){var _=y[v];o.push("function "+_+"(v) {this._v=v} var aproto="+_+".prototype","aproto.length="+e);for(var x=[],p=0;e>p;++p)x.push(["this._v._",v,p].join(""));o.push("aproto.toJSON=function "+_+"_toJSON(){return ["+x.join(",")+"]}","aproto.valueOf=aproto.toString=function "+_+"_toString(){return ["+x.join(",")+"].join()}");for(var p=0;e>p;++p)o.push("Object.defineProperty(aproto,"+p+",{get:function(){return this._v._"+v+p+"},set:function(v){return this._v._"+v+p+"=v|0},enumerable:true})");for(var p=0;p<f.length;++p)f[p]in Array.prototype&&o.push("aproto."+f[p]+"=Array.prototype."+f[p]);o.push(["Object.defineProperty(proto,'",v,"',{get:function ",_,"_get(){return new ",_,"(this)},set: function ",_,"_set(v){"].join(""));for(var p=0;e>p;++p)o.push("this._"+v+p+"=v["+p+"]|0");o.push("return v}})")}o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+s.map(function(t){return"this._shape"+t}).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),4>e?(o.push("function "+r+"_order(){"),2===e?o.push("return (Math.abs(this._stride0)>Math.abs(this._stride1))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this._stride0),s1=Math.abs(this._stride1),s2=Math.abs(this._stride2);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),o.push(n?"return this.data.set("+c+",v)}":"return this.data["+c+"]=v}"),o.push("proto.get=function "+r+"_get("+u.join(",")+"){"),o.push(n?"return this.data.get("+c+")}":"return this.data["+c+"]}"),o.push("proto.index=function "+r+"_index(",u.join(),"){return "+c+"}"),o.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+s.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this._shape",t,":i",t,"|0"].join("")}).join(",")+","+s.map(function(t){return"this._stride"+t}).join(",")+",this.offset)}");var m=s.map(function(t){return"a"+t+"=this._shape"+t}),w=s.map(function(t){return"c"+t+"=this._stride"+t});o.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+m.join(",")+","+w.join(","));for(var p=0;e>p;++p)o.push("if(typeof i"+p+"==='number'&&i"+p+">=0){d=i"+p+"|0;b+=c"+p+"*d;a"+p+"-=d}");o.push("return new "+r+"(this.data,"+s.map(function(t){return"a"+t}).join(",")+","+s.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+s.map(function(t){return"a"+t+"=this._shape"+t}).join(",")+","+s.map(function(t){return"b"+t+"=this._stride"+t}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var p=0;e>p;++p)o.push("if(typeof i"+p+"==='number'){d=i"+p+"|0;if(d<0){c+=b"+p+"*(a"+p+"-1);a"+p+"=ceil(-a"+p+"/d)}else{a"+p+"=ceil(a"+p+"/d)}b"+p+"*=d}");o.push("return new "+r+"(this.data,"+s.map(function(t){return"a"+t}).join(",")+","+s.map(function(t){return"b"+t}).join(",")+",c)}");for(var b=new Array(e),E=new Array(e),p=0;e>p;++p)b[p]="a[i"+p+"]",E[p]="b[i"+p+"]";o.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+b.join(",")+","+E.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(var p=0;e>p;++p)o.push("if(typeof i"+p+"==='number'&&i"+p+">=0){c=(c+this._stride"+p+"*i"+p+")|0}else{a.push(this._shape"+p+");b.push(this._stride"+p+")}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+s.map(function(t){return"shape["+t+"]"}).join(",")+","+s.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",o.join("\n"));return a(l[t],i)}function a(t){if(c&&r.isBuffer(t))return"buffer";if(u)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function s(t,e,r,n){if(void 0===t){var i=l.array[0];return i([])}"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var s=e.length;if(void 0===r){r=new Array(s);for(var h=s-1,f=1;h>=0;--h)r[h]=f,f*=e[h]}if(void 0===n){n=0;for(var h=0;s>h;++h)r[h]<0&&(n-=(e[h]-1)*r[h])}for(var u=a(t),c=l[u];c.length<=s+1;)c.push(o(u,c.length-1));var i=c[s+1];return i(t,e,r,n)}var h=t("iota-array"),f=["concat","join","slice","toString","indexOf","lastIndexOf","forEach","every","some","filter","map","reduce","reduceRight"],u="undefined"!=typeof Float64Array,c="undefined"!=typeof r,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=s}).call(this,t("buffer").Buffer)},{buffer:4,"iota-array":90}],90:[function(t,e){"use strict";function r(t){for(var e=new Array(t),r=0;t>r;++r)e[r]=r;return e}e.exports=r},{}],91:[function(t,e){function r(t,e,r,i){return function(o){return n(o,t,e,r,i)}}e.exports=r;var n=t("gl-shader-core")},{"gl-shader-core":97}],92:[function(t,e){function r(){throw new Error("You should bundle your code using `glslify` as a transform.")}e.exports=r},{}],93:[function(t,e,r){arguments[4][25][0].apply(r,arguments)},{dup:25}],94:[function(t,e,r){arguments[4][26][0].apply(r,arguments)},{"./reflect":95,dup:26}],95:[function(t,e,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],96:[function(t,e,r){arguments[4][28][0].apply(r,arguments)},{dup:28}],97:[function(t,e,r){arguments[4][29][0].apply(r,arguments)},{"./lib/create-attributes":93,"./lib/create-uniforms":94,"./lib/reflect":95,dup:29}],98:[function(t,e){function r(t,e){var r,n=document.createElement("img");return n.onload=function(){r||(r=!0,e&&e(void 0,n))},n.onerror=function(){r||(r=!0,e&&e(new Error('Unable to load "'+t+'"')))},n.src=t,n}e.exports=r},{}],99:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],100:[function(t,e){function r(t,e,r){return t*(1-r)+e*r}e.exports=r},{}],101:[function(t,e,r){arguments[4][89][0].apply(r,arguments)},{buffer:4,dup:89,"iota-array":102}],102:[function(t,e,r){arguments[4][90][0].apply(r,arguments)},{dup:90}],103:[function(t,e){e.exports=function(t,e,r,n){n||(n=[0,0,1,1]),t=t||[0,0],e=e||[1,1],r=r||e;var i=1/r[0],o=1/r[1],a=t[0],s=t[1],h=e[0],f=e[1];return n[0]=a*i,n[1]=s*o,n[2]=(a+h)*i,n[3]=(s+f)*o,n}},{}],104:[function(t,e){function r(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}return t}e.exports=r},{}]},{},[1]);